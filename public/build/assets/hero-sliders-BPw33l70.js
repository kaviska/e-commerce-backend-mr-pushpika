import{j as e,r as l,H as R,f as b}from"./app-CgcuHfcV.js";import{S as q,a as k,I as V}from"./SellerSidebar-DiSXodgc.js";import{c as J,B as h}from"./button-Cohb5s7o.js";import{L as D,I as E}from"./label-PlmXA06j.js";import{c as v}from"./index-khSbgmmG.js";import{D as X,f as Y,a as K,b as Q,c as W,e as Z}from"./dialog-BdEab6bY.js";import{X as ee}from"./index-CJQ1CjOf.js";import{U as ae,C as P}from"./upload-CcwfmAmb.js";import{c as se}from"./createLucideIcon-L111TtY5.js";import{L as te}from"./loader-circle-gW5wr0i7.js";import{T as re}from"./trash-2-DLQfhOHB.js";import"./index-Dlg8Dh6T.js";import"./index-DbJ4XrGX.js";import"./auth-OXswbwCF.js";import"./index-xVpn745B.js";import"./tslib.es6-BKH_Rm7U.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],le=se("SquarePen",ie);function A({className:n,...d}){return e.jsx("div",{"data-slot":"card",className:v("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...d})}function L({className:n,...d}){return e.jsx("div",{"data-slot":"card-content",className:v("px-6",n),...d})}const ne=J("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function T({className:n,variant:d,...N}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:v(ne({variant:d}),n),...N})}function U({className:n,...d}){return e.jsx("div",{"data-slot":"alert-description",className:v("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n),...d})}const Se=()=>{const[n,d]=l.useState([]),[N,_]=l.useState(!0),[O,g]=l.useState(!1),[o,y]=l.useState(null),[w,H]=l.useState(null),[r,c]=l.useState({heading:"",sub_heading:"",image:null}),[F,u]=l.useState(null),[x,I]=l.useState(!1),[f,m]=l.useState(null),[j,p]=l.useState(null),S=async()=>{var a,i;try{_(!0);const s=await b.get("/api/hero-sliders");s.data.status==="success"&&s.data.data&&d(s.data.data)}catch(s){m(((i=(a=s.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch hero sliders")}finally{_(!1)}};l.useEffect(()=>{S()},[]);const $=a=>{var s;const i=(s=a.target.files)==null?void 0:s[0];if(i){c({...r,image:i});const t=new FileReader;t.onloadend=()=>{u(t.result)},t.readAsDataURL(i)}},z=()=>{y(null),c({heading:"",sub_heading:"",image:null}),u(null),g(!0)},G=a=>{y(a),c({heading:a.heading||"",sub_heading:a.sub_heading||"",image:null}),u(`/storage/${a.image}`),g(!0)},M=async a=>{var i,s;if(a.preventDefault(),m(null),p(null),!r.image&&!o){m("Please select an image");return}I(!0);try{const t=new FormData;r.image&&t.append("image",r.image),r.heading&&t.append("heading",r.heading),r.sub_heading&&t.append("sub_heading",r.sub_heading);let C;o?(C=await b.post(`/api/hero-sliders/update?id=${o.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}),p("Hero slider updated successfully")):(C=await b.post("/api/hero-sliders",t,{headers:{"Content-Type":"multipart/form-data"}}),p("Hero slider created successfully")),C.data.status==="success"&&(c({heading:"",sub_heading:"",image:null}),u(null),y(null),g(!1),S())}catch(t){m(((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||`Failed to ${o?"update":"create"} hero slider`)}finally{I(!1)}},B=async a=>{var i,s;if(confirm("Are you sure you want to delete this hero slider?")){H(a);try{(await b.delete(`/api/hero-sliders/${a}`)).data.status==="success"&&(p("Hero slider deleted successfully"),S())}catch(t){m(((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to delete hero slider")}finally{H(null)}}};return l.useEffect(()=>{if(f||j){const a=setTimeout(()=>{m(null),p(null)},3e3);return()=>clearTimeout(a)}},[f,j]),e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Hero Sliders"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(q,{className:"w-64 flex-shrink-0"}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hero Sliders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your homepage hero sliders"})]}),e.jsxs(X,{open:O,onOpenChange:g,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(h,{onClick:z,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add New Slider"]})}),e.jsxs(K,{className:"max-w-2xl bg-white",children:[e.jsxs(Q,{children:[e.jsx(W,{children:o?"Edit Hero Slider":"Add New Hero Slider"}),e.jsx(Z,{children:o?"Update the hero slider details":"Upload an image and add optional heading text"})]}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{htmlFor:"image",children:["Image ",!o&&"*"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[F?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:F,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{u(null),c({...r,image:null})},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(ee,{className:"w-4 h-4"})})]}):e.jsxs("div",{children:[e.jsx(ae,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),e.jsxs("label",{htmlFor:"image",className:"cursor-pointer",children:[e.jsx("span",{className:"text-green-600 hover:text-green-700 font-medium",children:"Click to upload"}),e.jsx("span",{className:"text-gray-500",children:" or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 2MB"})]}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:$,className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"heading",children:"Heading"}),e.jsx(E,{id:"heading",value:r.heading,onChange:a=>c({...r,heading:a.target.value}),placeholder:"Enter main heading"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"sub_heading",children:"Sub Heading"}),e.jsx(E,{id:"sub_heading",value:r.sub_heading,onChange:a=>c({...r,sub_heading:a.target.value}),placeholder:"Enter sub heading"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:x,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:x,className:"bg-green-600 hover:bg-green-700 text-white",children:x?o?"Updating...":"Creating...":o?"Update Slider":"Create Slider"})]})]})]})]})]}),f&&e.jsxs(T,{variant:"destructive",className:"mb-4",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx(U,{children:f})]}),j&&e.jsxs(T,{className:"mb-4 bg-green-50 text-green-800 border-green-200",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx(U,{children:j})]}),N?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):n.length===0?e.jsx(A,{children:e.jsxs(L,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(V,{className:"w-16 h-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No hero sliders yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first hero slider"}),e.jsxs(h,{onClick:()=>g(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add Your First Slider"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>e.jsxs(A,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative aspect-video bg-gray-100",children:e.jsx("img",{src:`/storage/${a.image}`,alt:a.heading||"Hero slider",className:"w-full h-full object-cover"})}),e.jsxs(L,{className:"p-4",children:[a.heading&&e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1",children:a.heading}),a.sub_heading&&e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:a.sub_heading}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>G(a),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",disabled:w===a.id||x,children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx(h,{variant:"destructive",size:"sm",onClick:()=>B(a.id),disabled:w===a.id||x,children:w===a.id?e.jsx(te,{className:"w-4 h-4 animate-spin"}):e.jsx(re,{className:"w-4 h-4"})})]})]})]})]},a.id))})]})})]})]})};export{Se as default};
