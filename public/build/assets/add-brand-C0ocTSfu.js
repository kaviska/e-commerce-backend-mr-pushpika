import{r as l,t as d,j as e,H as A}from"./app-qpV6NWqw.js";import{B as h}from"./button-NKlONM_F.js";import{D as F,a as P,b as T,c as H,d as R}from"./dialog-Dg0CqTbX.js";import{I as f,L as C}from"./label-pXWFwsRc.js";import{g as Q,c as U}from"./seller-BdikjwE5.js";import{S as _}from"./SellerLayout-C4BW_6Gq.js";import{a as $,T as S}from"./SellerSidebar-CJIc9bF1.js";import{S as q}from"./search-DoLHt3ar.js";import{L}from"./loader-circle-ezDuAjqt.js";import"./index-BMI0fES_.js";import"./createLucideIcon-CuegIIdP.js";import"./index-B39KZRyb.js";import"./index-D6TAL5-S.js";import"./tslib.es6-BKH_Rm7U.js";import"./index-DXaf29s7.js";import"./dropdown-menu-CXTvqkN_.js";import"./index-Ca44j4hI.js";import"./auth-CMvdZPx9.js";const ce=()=>{const[D,I]=l.useState([]),[u,p]=l.useState(!0),[m,j]=l.useState(!1),[y,E]=l.useState(""),[M,c]=l.useState(!1),[n,g]=l.useState({name:"",slug:"",image:null}),[b,x]=l.useState(null);l.useEffect(()=>{w()},[]);const w=async()=>{p(!0);try{const s=await Q();s.status==="success"&&I(s.data)}catch(s){console.error("Error fetching brands:",s),d.error("Failed to load brands")}finally{p(!1)}},N=D.filter(s=>s.name.toLowerCase().includes(y.toLowerCase())),O=s=>{if(s.target.files&&s.target.files[0]){const o=s.target.files[0];g({...n,image:o}),x(URL.createObjectURL(o))}},k=async()=>{var s,o,v,B;j(!0);try{const r=new FormData;r.append("name",n.name),r.append("slug",n.slug),n.image&&r.append("image",n.image);const a=await U(r);if(a.status==="success")d.success("Brand created successfully"),w(),c(!1),g({name:"",slug:"",image:null}),x(null);else{let t="Failed to create brand";if(typeof a.errors=="string")t=a.errors;else if(typeof a.errors=="object"&&a.errors!==null){const i=Object.values(a.errors)[0];t=Array.isArray(i)?i[0]:i}else a.message&&(t=a.message);d.error(t)}}catch(r){let a="Failed to create brand";const t=(o=(s=r.response)==null?void 0:s.data)==null?void 0:o.errors;if(typeof t=="string")a=t;else if(typeof t=="object"&&t!==null){const i=Object.values(t)[0];a=Array.isArray(i)?i[0]:i}else(B=(v=r.response)==null?void 0:v.data)!=null&&B.message?a=r.response.data.message:r.message&&(a=r.message);d.error(a)}finally{j(!1)}};return e.jsxs(_,{children:[e.jsx(A,{title:"Manage Brands"}),e.jsxs("div",{className:"mx-auto max-w-7xl space-y-8",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Brands"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Manage product brands or create new ones."})]}),e.jsxs(h,{onClick:()=>c(!0),className:"bg-green-600 text-white hover:bg-green-700",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Create Brand"]})]}),e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:e.jsx(q,{className:"h-5 w-5 text-gray-400"})}),e.jsx(f,{placeholder:"Search brands...",className:"h-12 rounded-xl border-gray-200 bg-white pl-11 text-lg shadow-sm focus:border-green-500 focus:ring-green-500",value:y,onChange:s=>E(s.target.value)})]}),u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(L,{className:"mb-4 h-10 w-10 animate-spin text-green-600"}),e.jsx("p",{className:"text-gray-500",children:"Loading brands..."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:N.map(s=>e.jsxs("div",{className:"group flex items-center gap-4 rounded-xl border border-gray-100 bg-white p-5 shadow-sm transition-all duration-200 hover:shadow-md",children:[e.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center overflow-hidden rounded-lg bg-gray-100",children:s.image?e.jsx("img",{src:`/${s.image}`,alt:s.name,className:"h-full w-full object-cover"}):e.jsx(S,{className:"h-6 w-6 text-gray-400"})}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("h3",{className:"truncate font-semibold text-gray-900",children:s.name})})]},s.id))}),!u&&N.length===0&&e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-gray-50 py-20 text-center",children:[e.jsx(S,{className:"mx-auto mb-4 h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No brands found"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Try searching for something else or create a new brand."})]})]}),e.jsx(F,{open:M,onOpenChange:c,children:e.jsxs(P,{className:"bg-white",children:[e.jsx(T,{children:e.jsx(H,{children:"Create Brand"})}),e.jsxs("div",{className:"space-y-4 bg-white py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Brand Name"}),e.jsx(f,{placeholder:"Brand Name",value:n.name,onChange:s=>g({...n,name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Brand Image"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[b&&e.jsx("div",{className:"w-full h-40 bg-gray-100 rounded-md overflow-hidden border border-gray-200",children:e.jsx("img",{src:b,alt:"Preview",className:"w-full h-full object-contain"})}),e.jsx(f,{type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:O,className:"bg-white"})]})]})]}),e.jsxs(R,{children:[e.jsx(h,{variant:"outline",onClick:()=>{c(!1),x(null)},disabled:m,children:"Cancel"}),e.jsxs(h,{onClick:k,className:"bg-green-600 text-white hover:bg-green-700",disabled:m,children:[m&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})})]})};export{ce as default};
