import{r as i,t as g,j as e,L as A}from"./app-BevSkdG7.js";import{S as F}from"./SellerLayout-CTbuJ4A_.js";import{a as I,b as O}from"./seller-uIV9mca_.js";import{B as h}from"./button-DoIombom.js";import{I as d,L as u}from"./label-BHSfXJoT.js";import{D as B,a as Q,b as T,c as H,d as P}from"./dialog-B1MP9hr-.js";import{a as R,L as v}from"./SellerSidebar-BlXJOl8A.js";import{S as $}from"./search-I-W0diZz.js";import{L}from"./loader-circle-yeZcuZFh.js";import"./dropdown-menu-DVRQD0v4.js";import"./index-Dn5UhpWC.js";import"./index-DzPF9EFL.js";import"./index-CeNcb58v.js";import"./index-C9iIj63M.js";import"./createLucideIcon-B2Y984Ia.js";import"./tslib.es6-BUas5LQb.js";import"./index-CqE6tAZT.js";import"./auth-BlSIcDT4.js";const oe=()=>{const[S,D]=i.useState([]),[f,p]=i.useState(!0),[m,y]=i.useState(!1),[x,E]=i.useState(""),[M,n]=i.useState(!1),[l,c]=i.useState({name:"",slug:"",image:null});i.useEffect(()=>{j()},[]);const j=async()=>{p(!0);try{const s=await I();s.status==="success"&&D(s.data)}catch(s){console.error("Error fetching categories:",s),g.error("Failed to load categories")}finally{p(!1)}},C=S.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())||s.slug.toLowerCase().includes(x.toLowerCase())),k=async()=>{var s,N,w,b;y(!0);try{const r=new FormData;r.append("name",l.name),r.append("slug",l.slug),l.image&&r.append("image",l.image);const a=await O(r);if(a.status==="success")g.success("Category created successfully"),j(),n(!1),c({name:"",slug:"",image:null});else{let t="Failed to create category";if(typeof a.errors=="string")t=a.errors;else if(typeof a.errors=="object"&&a.errors!==null){const o=Object.values(a.errors)[0];t=Array.isArray(o)?o[0]:o}else a.message&&(t=a.message);g.error(t)}}catch(r){let a="Failed to create category";const t=(N=(s=r.response)==null?void 0:s.data)==null?void 0:N.errors;if(typeof t=="string")a=t;else if(typeof t=="object"&&t!==null){const o=Object.values(t)[0];a=Array.isArray(o)?o[0]:o}else(b=(w=r.response)==null?void 0:w.data)!=null&&b.message?a=r.response.data.message:r.message&&(a=r.message);g.error(a)}finally{y(!1)}};return e.jsxs(F,{children:[e.jsx(A,{title:"Manage Categories"}),e.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Categories"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage product categories or create new ones."})]}),e.jsxs(h,{onClick:()=>n(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Create Category"]})]}),e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx($,{className:"h-5 w-5 text-gray-400"})}),e.jsx(d,{placeholder:"Search categories...",className:"pl-11 h-12 text-lg bg-white shadow-sm border-gray-200 focus:border-green-500 focus:ring-green-500 rounded-xl",value:x,onChange:s=>E(s.target.value)})]}),f?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(L,{className:"h-10 w-10 animate-spin text-green-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading categories..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:C.map(s=>e.jsxs("div",{className:"group bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-200 p-5 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center flex-shrink-0 overflow-hidden",children:s.image?e.jsx("img",{src:`/${s.image}`,alt:s.name,className:"h-full w-full object-cover"}):e.jsx(v,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.slug})]})]},s.id))}),!f&&C.length===0&&e.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[e.jsx(v,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No categories found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Try searching for something else or create a new category."})]})]}),e.jsx(B,{open:M,onOpenChange:n,children:e.jsxs(Q,{className:"bg-white",children:[e.jsx(T,{children:e.jsx(H,{children:"Create Category"})}),e.jsxs("div",{className:"space-y-4 py-4 bg-white",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Category Name"}),e.jsx(d,{placeholder:"Category Name",value:l.name,onChange:s=>c({...l,name:s.target.value,slug:s.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Slug"}),e.jsx(d,{placeholder:"category-slug",value:l.slug,onChange:s=>c({...l,slug:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Image"}),e.jsx(d,{type:"file",onChange:s=>s.target.files&&c({...l,image:s.target.files[0]})})]})]}),e.jsxs(P,{children:[e.jsx(h,{variant:"outline",onClick:()=>n(!1),disabled:m,children:"Cancel"}),e.jsxs(h,{onClick:k,className:"bg-green-600 hover:bg-green-700 text-white",disabled:m,children:[m&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})})]})};export{oe as default};
