import{r as o,t as d,j as e,L as D}from"./app-CWiOuBar.js";import{B as x}from"./button-Dxm4Zo-h.js";import{D as E,a as M,b as k,c as A,d as F}from"./dialog-C7_lClPz.js";import{I as m,L as h}from"./label-DJOi4cIA.js";import{g as O,c as T}from"./seller-EGUTzyBc.js";import{S as I}from"./SellerLayout-D-XJhX72.js";import{a as Q,T as w}from"./SellerSidebar-vrNB4XgO.js";import{S as H}from"./search-DWlJk53U.js";import{L as P}from"./loader-circle-CvRf3XAX.js";import"./index-CUy8SzR8.js";import"./createLucideIcon-BUxOv-G3.js";import"./index-DEqCAKoJ.js";import"./tslib.es6-BUas5LQb.js";import"./index-CbP2wK5_.js";import"./index-B4dni2ra.js";import"./dropdown-menu-_XKwrTlt.js";import"./index-Df33P2d9.js";import"./auth-CXF110Ab.js";const te=()=>{const[v,B]=o.useState([]),[u,p]=o.useState(!0),[g,C]=o.useState(""),[L,i]=o.useState(!1),[l,c]=o.useState({name:"",slug:"",image:null});o.useEffect(()=>{f()},[]);const f=async()=>{p(!0);try{const s=await O();s.status==="success"&&B(s.data)}catch(s){console.error("Error fetching brands:",s),d.error("Failed to load brands")}finally{p(!1)}},j=v.filter(s=>s.name.toLowerCase().includes(g.toLowerCase())||s.slug.toLowerCase().includes(g.toLowerCase())),S=async()=>{var s,y,b,N;try{const r=new FormData;r.append("name",l.name),r.append("slug",l.slug),l.image&&r.append("image",l.image);const a=await T(r);if(a.status==="success")d.success("Brand created successfully"),f(),i(!1),c({name:"",slug:"",image:null});else{let t="Failed to create brand";if(typeof a.errors=="string")t=a.errors;else if(typeof a.errors=="object"&&a.errors!==null){const n=Object.values(a.errors)[0];t=Array.isArray(n)?n[0]:n}else a.message&&(t=a.message);d.error(t)}}catch(r){let a="Failed to create brand";const t=(y=(s=r.response)==null?void 0:s.data)==null?void 0:y.errors;if(typeof t=="string")a=t;else if(typeof t=="object"&&t!==null){const n=Object.values(t)[0];a=Array.isArray(n)?n[0]:n}else(N=(b=r.response)==null?void 0:b.data)!=null&&N.message?a=r.response.data.message:r.message&&(a=r.message);d.error(a)}};return e.jsxs(I,{children:[e.jsx(D,{title:"Manage Brands"}),e.jsxs("div",{className:"mx-auto max-w-7xl space-y-8",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Brands"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Manage product brands or create new ones."})]}),e.jsxs(x,{onClick:()=>i(!0),className:"bg-green-600 text-white hover:bg-green-700",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Create Brand"]})]}),e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:e.jsx(H,{className:"h-5 w-5 text-gray-400"})}),e.jsx(m,{placeholder:"Search brands...",className:"h-12 rounded-xl border-gray-200 bg-white pl-11 text-lg shadow-sm focus:border-green-500 focus:ring-green-500",value:g,onChange:s=>C(s.target.value)})]}),u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(P,{className:"mb-4 h-10 w-10 animate-spin text-green-600"}),e.jsx("p",{className:"text-gray-500",children:"Loading brands..."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:j.map(s=>e.jsxs("div",{className:"group flex items-center gap-4 rounded-xl border border-gray-100 bg-white p-5 shadow-sm transition-all duration-200 hover:shadow-md",children:[e.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center overflow-hidden rounded-lg bg-gray-100",children:s.logo?e.jsx("img",{src:`/${s.logo}`,alt:s.name,className:"h-full w-full object-cover"}):e.jsx(w,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"truncate text-sm text-gray-500",children:s.slug})]})]},s.id))}),!u&&j.length===0&&e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-gray-50 py-20 text-center",children:[e.jsx(w,{className:"mx-auto mb-4 h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No brands found"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Try searching for something else or create a new brand."})]})]}),e.jsx(E,{open:L,onOpenChange:i,children:e.jsxs(M,{className:"bg-white",children:[e.jsx(k,{children:e.jsx(A,{children:"Create Brand"})}),e.jsxs("div",{className:"space-y-4 bg-white py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Brand Name"}),e.jsx(m,{placeholder:"Brand Name",value:l.name,onChange:s=>c({...l,name:s.target.value,slug:s.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Slug"}),e.jsx(m,{placeholder:"brand-slug",value:l.slug,onChange:s=>c({...l,slug:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Logo"}),e.jsx(m,{type:"file",onChange:s=>s.target.files&&c({...l,image:s.target.files[0]})})]})]}),e.jsxs(F,{children:[e.jsx(x,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(x,{onClick:S,className:"bg-green-600 text-white hover:bg-green-700",children:"Create"})]})]})})]})};export{te as default};
