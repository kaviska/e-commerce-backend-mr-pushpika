import{r as t,f as h,j as e,H as Z,a as L,t as u}from"./app-BSycSqpy.js";import{S as ee}from"./SellerLayout-fetOk4BP.js";import{B as o}from"./button-CUxHvzeS.js";import{L as r,I as d}from"./label-DteqOsHd.js";import{S as O,a as E,b as T,c as M,d as z}from"./select-Di3InN26.js";import{C as ae}from"./checkbox-BoyBoh90.js";import{D as H,a as R,b as V,c as $,d as q}from"./dialog-B8WnqYRL.js";import{I as se}from"./SellerSidebar-bFa3B365.js";import{X as te}from"./index-DGBZD8vQ.js";import{L as C}from"./loader-circle-B4ej4LJ_.js";import"./dropdown-menu-ynoh6QGB.js";import"./index-LXIpDBDv.js";import"./index-CJqK6Fm7.js";import"./createLucideIcon-CmGTaRFo.js";import"./tslib.es6-BKH_Rm7U.js";import"./index-DH3ux_oD.js";import"./index-DbKhAYHR.js";import"./index-COcY9x1R.js";import"./index-DxnFPM7B.js";import"./auth-CS0j0hjE.js";const we=()=>{const[w,S]=t.useState(!1),[j,_]=t.useState(!1),[N,B]=t.useState(!1),[A,U]=t.useState([]),[W,X]=t.useState([]),[s,m]=t.useState({name:"",description:"",category_id:"",brand_id:"",web_availability:!1,primary_image:[]}),[G,x]=t.useState(!1),[l,f]=t.useState({name:"",slug:"",image:null}),[J,y]=t.useState(!1),[n,b]=t.useState({name:"",slug:"",image:null}),[k,D]=t.useState(null);t.useEffect(()=>{I(),F()},[]);const I=async()=>{try{const a=await h.get("/api/categories");a.data.status==="success"&&U(a.data.data)}catch(a){console.error("Error fetching categories:",a)}},F=async()=>{try{const a=await h.get("/api/brands");a.data.status==="success"&&X(a.data.data)}catch(a){console.error("Error fetching brands:",a)}},K=async a=>{var c,p;a.preventDefault(),S(!0);try{const i=new FormData;i.append("name",s.name),i.append("description",s.description),i.append("category_id",s.category_id),i.append("brand_id",s.brand_id),s.web_availability&&i.append("web_availability","1"),s.primary_image.length>0&&i.append("primary_image",s.primary_image[0]);const P=await h.post("/api/add/products",i,{headers:{"Content-Type":"multipart/form-data"}});P.data.status==="success"?(u.success("Product created successfully"),L.visit("/seller/products/add-existing")):u.error(P.data.message||"Failed to create product")}catch(i){console.error("Error creating product:",i),u.error(((p=(c=i.response)==null?void 0:c.data)==null?void 0:p.message)||"Failed to create product")}finally{S(!1)}},Q=async()=>{_(!0);try{const a=new FormData;a.append("name",l.name),a.append("slug",l.slug),l.image&&a.append("image",l.image),(await h.post("/api/brands",a,{headers:{"Content-Type":"multipart/form-data"}})).data.status==="success"&&(u.success("Brand created successfully"),F(),x(!1),f({name:"",slug:"",image:null}))}catch{u.error("Failed to create brand")}finally{_(!1)}},Y=async()=>{B(!0);try{const a=new FormData;a.append("name",n.name),a.append("slug",n.slug),n.image&&a.append("image",n.image),(await h.post("/api/categories",a,{headers:{"Content-Type":"multipart/form-data"}})).data.status==="success"&&(u.success("Category created successfully"),I(),y(!1),b({name:"",slug:"",image:null}))}catch{u.error("Failed to create category")}finally{B(!1)}},g="h-12 bg-white shadow-sm border-gray-200 focus:border-green-500 focus:ring-green-500 rounded-xl",v="bg-green-600 hover:bg-green-700 text-white rounded-lg";return e.jsxs(ee,{children:[e.jsx(Z,{title:"Create New Product"}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Create New Product"}),e.jsx("p",{className:"text-sm text-gray-500 text-lg",children:"Add a new product to the global catalog."})]}),e.jsxs("form",{onSubmit:K,className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",className:"text-base font-medium text-gray-900",children:"Product Name"}),e.jsx(d,{id:"name",placeholder:"e.g. Premium Butter 200g",className:g,value:s.name,onChange:a=>m({...s,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",className:"text-base font-medium text-gray-900",children:"Description"}),e.jsx("textarea",{id:"description",className:"flex min-h-[120px] w-full rounded-xl border border-gray-200 bg-white px-3 py-3 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:border-green-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",placeholder:"Describe the product...",value:s.description,onChange:a=>m({...s,description:a.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{className:"text-base font-medium text-gray-900",children:"Category"}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 text-green-600 hover:text-green-700 font-medium",onClick:()=>y(!0),children:"+ New Category"})]}),e.jsxs(O,{value:s.category_id,onValueChange:a=>m({...s,category_id:a}),children:[e.jsx(E,{className:g,children:e.jsx(T,{placeholder:"Select Category"})}),e.jsx(M,{className:"bg-white",children:A.map(a=>e.jsx(z,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{className:"text-base font-medium text-gray-900",children:"Brand"}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 text-green-600 hover:text-green-700 font-medium",onClick:()=>x(!0),children:"+ New Brand"})]}),e.jsxs(O,{value:s.brand_id,onValueChange:a=>m({...s,brand_id:a}),children:[e.jsx(E,{className:g,children:e.jsx(T,{placeholder:"Select Brand"})}),e.jsx(M,{className:"bg-white",children:W.map(a=>e.jsx(z,{value:a.id.toString(),children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{className:"text-base font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-gray-600"}),"Primary Image"]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 space-y-4",children:[e.jsx(d,{type:"file",accept:"image/*",onChange:a=>{var p;const c=(p=a.target.files)==null?void 0:p[0];c&&(m({...s,primary_image:[c]}),D(URL.createObjectURL(c)))},className:"cursor-pointer file:cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 h-auto py-2"}),k&&e.jsxs("div",{className:"relative w-40 h-40 rounded-xl overflow-hidden border border-gray-200",children:[e.jsx("img",{src:k,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-8 w-8 bg-white/80 hover:bg-white rounded-full transition-colors",onClick:()=>{m({...s,primary_image:[]}),D(null)},children:e.jsx(te,{className:"h-5 w-5 text-gray-500"})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx(ae,{id:"web_availability",checked:s.web_availability,onCheckedChange:a=>m({...s,web_availability:a}),className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),e.jsx(r,{htmlFor:"web_availability",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Available on Web Store"})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-4",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>L.visit("/seller/products/add-existing"),className:"h-12 px-6 rounded-xl border-gray-200",children:"Cancel"}),e.jsxs(o,{type:"submit",className:`${v} h-12 px-8 rounded-xl font-medium text-base`,disabled:w,children:[w&&e.jsx(C,{className:"mr-2 h-5 w-5 animate-spin"}),"Create Product"]})]})]})]}),e.jsx(H,{open:G,onOpenChange:x,children:e.jsxs(R,{className:"bg-white rounded-2xl",children:[e.jsx(V,{children:e.jsx($,{children:"Create Brand"})}),e.jsxs("div",{className:"space-y-4 py-4 bg-white",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Brand Name"}),e.jsx(d,{placeholder:"Brand Name",className:g,value:l.name,onChange:a=>f({...l,name:a.target.value,slug:a.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Slug"}),e.jsx(d,{placeholder:"brand-slug",className:g,value:l.slug,onChange:a=>f({...l,slug:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Logo"}),e.jsx(d,{type:"file",className:"h-12 pt-2",onChange:a=>a.target.files&&f({...l,image:a.target.files[0]})})]})]}),e.jsxs(q,{children:[e.jsx(o,{variant:"outline",onClick:()=>x(!1),className:"rounded-xl",disabled:j,children:"Cancel"}),e.jsxs(o,{onClick:Q,className:`${v} rounded-xl`,disabled:j,children:[j&&e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})}),e.jsx(H,{open:J,onOpenChange:y,children:e.jsxs(R,{className:"bg-white rounded-2xl",children:[e.jsx(V,{children:e.jsx($,{children:"Create Category"})}),e.jsxs("div",{className:"space-y-4 py-4 bg-white",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Category Name"}),e.jsx(d,{placeholder:"Category Name",className:g,value:n.name,onChange:a=>b({...n,name:a.target.value,slug:a.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Slug"}),e.jsx(d,{placeholder:"category-slug",className:g,value:n.slug,onChange:a=>b({...n,slug:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Image"}),e.jsx(d,{type:"file",className:"h-12 pt-2",onChange:a=>a.target.files&&b({...n,image:a.target.files[0]})})]})]}),e.jsxs(q,{children:[e.jsx(o,{variant:"outline",onClick:()=>y(!1),className:"rounded-xl",disabled:N,children:"Cancel"}),e.jsxs(o,{onClick:Y,className:`${v} rounded-xl`,disabled:N,children:[N&&e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})})]})};export{we as default};
