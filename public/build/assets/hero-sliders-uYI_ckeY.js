import{j as e,r as l,L as B,e as j}from"./app-CWiOuBar.js";import{b as R,a as H,I as q}from"./SellerSidebar-vrNB4XgO.js";import{c as b,a as V,B as m}from"./button-Dxm4Zo-h.js";import{L as C,I as F}from"./label-DJOi4cIA.js";import{D as J,f as X,a as Y,b as K,c as Q,e as W}from"./dialog-C7_lClPz.js";import{X as Z}from"./index-CUy8SzR8.js";import{c as T}from"./createLucideIcon-BUxOv-G3.js";import{C as E}from"./circle-alert-BJOEGb6o.js";import{T as ee}from"./trash-2-DrS9Ihmt.js";import"./index-CbP2wK5_.js";import"./index-B4dni2ra.js";import"./index-DEqCAKoJ.js";import"./tslib.es6-BUas5LQb.js";import"./auth-CXF110Ab.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],se=T("SquarePen",ae);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],re=T("Upload",te);function I({className:n,...d}){return e.jsx("div",{"data-slot":"card",className:b("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...d})}function P({className:n,...d}){return e.jsx("div",{"data-slot":"card-content",className:b("px-6",n),...d})}const ie=V("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function A({className:n,variant:d,...v}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:b(ie({variant:d}),n),...v})}function L({className:n,...d}){return e.jsx("div",{"data-slot":"alert-description",className:b("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n),...d})}const ve=()=>{const[n,d]=l.useState([]),[v,D]=l.useState(!0),[U,g]=l.useState(!1),[o,N]=l.useState(null),[r,c]=l.useState({heading:"",sub_heading:"",image:null}),[_,u]=l.useState(null),[y,k]=l.useState(!1),[p,h]=l.useState(null),[f,x]=l.useState(null),w=async()=>{var a,i;try{D(!0);const s=await j.get("/api/hero-sliders");s.data.status==="success"&&s.data.data&&d(s.data.data)}catch(s){h(((i=(a=s.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch hero sliders")}finally{D(!1)}};l.useEffect(()=>{w()},[]);const $=a=>{var s;const i=(s=a.target.files)==null?void 0:s[0];if(i){c({...r,image:i});const t=new FileReader;t.onloadend=()=>{u(t.result)},t.readAsDataURL(i)}},M=()=>{N(null),c({heading:"",sub_heading:"",image:null}),u(null),g(!0)},O=a=>{N(a),c({heading:a.heading||"",sub_heading:a.sub_heading||"",image:null}),u(`/storage/${a.image}`),g(!0)},z=async a=>{var i,s;if(a.preventDefault(),h(null),x(null),!r.image&&!o){h("Please select an image");return}k(!0);try{const t=new FormData;r.image&&t.append("image",r.image),r.heading&&t.append("heading",r.heading),r.sub_heading&&t.append("sub_heading",r.sub_heading);let S;o?(S=await j.post(`/api/hero-sliders/update?id=${o.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}),x("Hero slider updated successfully")):(S=await j.post("/api/hero-sliders",t,{headers:{"Content-Type":"multipart/form-data"}}),x("Hero slider created successfully")),S.data.status==="success"&&(c({heading:"",sub_heading:"",image:null}),u(null),N(null),g(!1),w())}catch(t){h(((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||`Failed to ${o?"update":"create"} hero slider`)}finally{k(!1)}},G=async a=>{var i,s;if(confirm("Are you sure you want to delete this hero slider?"))try{(await j.delete(`/api/hero-sliders/${a}`)).data.status==="success"&&(x("Hero slider deleted successfully"),w())}catch(t){h(((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to delete hero slider")}};return l.useEffect(()=>{if(p||f){const a=setTimeout(()=>{h(null),x(null)},3e3);return()=>clearTimeout(a)}},[p,f]),e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Hero Sliders"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(R,{className:"w-64 flex-shrink-0"}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hero Sliders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your homepage hero sliders"})]}),e.jsxs(J,{open:U,onOpenChange:g,children:[e.jsx(X,{asChild:!0,children:e.jsxs(m,{onClick:M,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add New Slider"]})}),e.jsxs(Y,{className:"max-w-2xl bg-white",children:[e.jsxs(K,{children:[e.jsx(Q,{children:o?"Edit Hero Slider":"Add New Hero Slider"}),e.jsx(W,{children:o?"Update the hero slider details":"Upload an image and add optional heading text"})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"image",children:["Image ",!o&&"*"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[_?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:_,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{u(null),c({...r,image:null})},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(Z,{className:"w-4 h-4"})})]}):e.jsxs("div",{children:[e.jsx(re,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),e.jsxs("label",{htmlFor:"image",className:"cursor-pointer",children:[e.jsx("span",{className:"text-green-600 hover:text-green-700 font-medium",children:"Click to upload"}),e.jsx("span",{className:"text-gray-500",children:" or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 2MB"})]}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:$,className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"heading",children:"Heading"}),e.jsx(F,{id:"heading",value:r.heading,onChange:a=>c({...r,heading:a.target.value}),placeholder:"Enter main heading"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"sub_heading",children:"Sub Heading"}),e.jsx(F,{id:"sub_heading",value:r.sub_heading,onChange:a=>c({...r,sub_heading:a.target.value}),placeholder:"Enter sub heading"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:y,children:"Cancel"}),e.jsx(m,{type:"submit",disabled:y,className:"bg-green-600 hover:bg-green-700 text-white",children:y?o?"Updating...":"Creating...":o?"Update Slider":"Create Slider"})]})]})]})]})]}),p&&e.jsxs(A,{variant:"destructive",className:"mb-4",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(L,{children:p})]}),f&&e.jsxs(A,{className:"mb-4 bg-green-50 text-green-800 border-green-200",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(L,{children:f})]}),v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):n.length===0?e.jsx(I,{children:e.jsxs(P,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(q,{className:"w-16 h-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No hero sliders yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first hero slider"}),e.jsxs(m,{onClick:()=>g(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add Your First Slider"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>e.jsxs(I,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative aspect-video bg-gray-100",children:e.jsx("img",{src:`/storage/${a.image}`,alt:a.heading||"Hero slider",className:"w-full h-full object-cover"})}),e.jsxs(P,{className:"p-4",children:[a.heading&&e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1",children:a.heading}),a.sub_heading&&e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:a.sub_heading}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>O(a),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(m,{variant:"destructive",size:"sm",onClick:()=>G(a.id),children:e.jsx(ee,{className:"w-4 h-4"})})]})]})]})]},a.id))})]})})]})]})};export{ve as default};
