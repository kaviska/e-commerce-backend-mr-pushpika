import{G as u,r as I,t as k,a as G,j as r}from"./app-Dmq_v5yT.js";import{P as c}from"./index-E3OIjkxP.js";import{e as ke,N as ee,F as te,f as ce}from"./Footer-CBh3cGRl.js";import{S as Oe}from"./StepperNav-BvmXnJDt.js";import{n as Ae,o as Re,f as re,p as Ie,l as _e}from"./index-EL3ZZVKx.js";import"./logo-D38OwFmG.js";import"./auth-DiJPeYeS.js";var ue="clover",Te=function(e){return e===3?"v3":e},de="https://js.stripe.com",Le="".concat(de,"/").concat(ue,"/stripe.js"),Fe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ue=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Me=function(e){return Fe.test(e)||Ue.test(e)},We=function(){for(var e=document.querySelectorAll('script[src^="'.concat(de,'"]')),t=0;t<e.length;t++){var s=e[t];if(Me(s.src))return s}return null},ne=function(e){var t="",s=document.createElement("script");s.src="".concat(Le).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(s),s},De=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.6.1",startTime:t})},T=null,B=null,K=null,Be=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Ke=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},$e=function(e){return T!==null?T:(T=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var a=We();if(!(a&&e)){if(!a)a=ne(e);else if(a&&K!==null&&B!==null){var o;a.removeEventListener("load",K),a.removeEventListener("error",B),(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=ne(e)}}K=Ke(t,s),B=Be(s),a.addEventListener("load",K),a.addEventListener("error",B)}catch(l){s(l);return}}),T.catch(function(t){return T=null,Promise.reject(t)}))},qe=function(e,t,s){if(e===null)return null;var a=t[0],o=a.match(/^pk_test/),l=Te(e.version),d=ue;o&&l!==d&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("8.6.1"," expected Stripe.js@").concat(d,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,t);return De(i,s),i},L,me=!1,pe=function(){return L||(L=$e(null).catch(function(e){return L=null,Promise.reject(e)}),L)};Promise.resolve().then(function(){return pe()}).catch(function(n){me||console.warn(n)});var Je=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];me=!0;var a=Date.now();return pe().then(function(o){return qe(o,t,a)})};function se(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function ae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?se(Object(t),!0).forEach(function(s){fe(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function $(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$=function(e){return typeof e}:$=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(n)}function fe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ye(n,e){if(n==null)return{};var t={},s=Object.keys(n),a,o;for(o=0;o<s.length;o++)a=s[o],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function Ge(n,e){if(n==null)return{};var t=Ye(n,e),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)s=o[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function he(n,e){return Ve(n)||He(n,e)||ze(n,e)||Xe()}function Ve(n){if(Array.isArray(n))return n}function He(n,e){var t=n&&(typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var s=[],a=!0,o=!1,l,d;try{for(t=t.call(n);!(a=(l=t.next()).done)&&(s.push(l.value),!(e&&s.length===e));a=!0);}catch(i){o=!0,d=i}finally{try{!a&&t.return!=null&&t.return()}finally{if(o)throw d}}return s}}function ze(n,e){if(n){if(typeof n=="string")return oe(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oe(n,e)}}function oe(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function Xe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=function(e,t,s){var a=!!s,o=u.useRef(s);u.useEffect(function(){o.current=s},[s]),u.useEffect(function(){if(!a||!e)return function(){};var l=function(){o.current&&o.current.apply(o,arguments)};return e.on(t,l),function(){e.off(t,l)}},[a,t,e,o])},V=function(e){var t=u.useRef(e);return u.useEffect(function(){t.current=e},[e]),t.current},_=function(e){return e!==null&&$(e)==="object"},Qe=function(e){return _(e)&&typeof e.then=="function"},Ze=function(e){return _(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},ie="[object Object]",et=function n(e,t){if(!_(e)||!_(t))return e===t;var s=Array.isArray(e),a=Array.isArray(t);if(s!==a)return!1;var o=Object.prototype.toString.call(e)===ie,l=Object.prototype.toString.call(t)===ie;if(o!==l)return!1;if(!o&&!s)return e===t;var d=Object.keys(e),i=Object.keys(t);if(d.length!==i.length)return!1;for(var j={},g=0;g<d.length;g+=1)j[d[g]]=!0;for(var b=0;b<i.length;b+=1)j[i[b]]=!0;var m=Object.keys(j);if(m.length!==d.length)return!1;var w=e,N=t,S=function(O){return n(w[O],N[O])};return m.every(S)},ve=function(e,t,s){return _(e)?Object.keys(e).reduce(function(a,o){var l=!_(t)||!et(e[o],t[o]);return s.includes(o)?(l&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),a):l?ae(ae({},a||{}),{},fe({},o,e[o])):a},null):null},xe="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",le=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xe;if(e===null||Ze(e))return e;throw new Error(t)},tt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xe;if(Qe(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return le(a,t)})};var s=le(e,t);return s===null?{tag:"empty"}:{tag:"sync",stripe:s}},rt=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),e.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},q=u.createContext(null);q.displayName="ElementsContext";var ye=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},ge=function(e){var t=e.stripe,s=e.options,a=e.children,o=u.useMemo(function(){return tt(t)},[t]),l=u.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(s):null}}),d=he(l,2),i=d[0],j=d[1];u.useEffect(function(){var m=!0,w=function(S){j(function(P){return P.stripe?P:{stripe:S,elements:S.elements(s)}})};return o.tag==="async"&&!i.stripe?o.stripePromise.then(function(N){N&&m&&w(N)}):o.tag==="sync"&&!i.stripe&&w(o.stripe),function(){m=!1}},[o,i,s]);var g=V(t);u.useEffect(function(){g!==null&&g!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[g,t]);var b=V(s);return u.useEffect(function(){if(i.elements){var m=ve(s,b,["clientSecret","fonts"]);m&&i.elements.update(m)}},[s,b,i.elements]),u.useEffect(function(){rt(i.stripe)},[i.stripe]),u.createElement(q.Provider,{value:i},a)};ge.propTypes={stripe:c.any,options:c.object};var nt=function(e){var t=u.useContext(q);return ye(t,e)},st=function(){var e=nt("calls useElements()"),t=e.elements;return t};c.func.isRequired;var be=u.createContext(null);be.displayName="CheckoutContext";c.any,c.shape({clientSecret:c.oneOfType([c.string,c.instanceOf(Promise)]).isRequired,elementsOptions:c.object}).isRequired;var H=function(e){var t=u.useContext(be),s=u.useContext(q);if(t){if(s)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}else return ye(s,e)},at=["mode"],ot=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},x=function(e,t){var s="".concat(ot(e),"Element"),a=function(i){var j=i.id,g=i.className,b=i.options,m=b===void 0?{}:b,w=i.onBlur,N=i.onFocus,S=i.onReady,P=i.onChange,O=i.onEscape,F=i.onClick,v=i.onLoadError,A=i.onLoaderStart,U=i.onNetworksChange,M=i.onConfirm,je=i.onCancel,Se=i.onShippingAddressChange,Ne=i.onShippingRateChange,Ee=i.onSavedPaymentMethodRemove,Ce=i.onSavedPaymentMethodUpdate,W=H("mounts <".concat(s,">")),D="elements"in W?W.elements:null,R="checkoutState"in W?W.checkoutState:null,E=(R==null?void 0:R.type)==="success"||(R==null?void 0:R.type)==="loading"?R.sdk:null,we=u.useState(null),z=he(we,2),f=z[0],Pe=z[1],C=u.useRef(null),J=u.useRef(null);h(f,"blur",w),h(f,"focus",N),h(f,"escape",O),h(f,"click",F),h(f,"loaderror",v),h(f,"loaderstart",A),h(f,"networkschange",U),h(f,"confirm",M),h(f,"cancel",je),h(f,"shippingaddresschange",Se),h(f,"shippingratechange",Ne),h(f,"savedpaymentmethodremove",Ee),h(f,"savedpaymentmethodupdate",Ce),h(f,"change",P);var Y;S&&(e==="expressCheckout"?Y=S:Y=function(){S(f)}),h(f,"ready",Y),u.useLayoutEffect(function(){if(C.current===null&&J.current!==null&&(D||E)){var p=null;if(E)switch(e){case"paymentForm":p=E.createPaymentFormElement();break;case"payment":p=E.createPaymentElement(m);break;case"address":if("mode"in m){var Q=m.mode,Z=Ge(m,at);if(Q==="shipping")p=E.createShippingAddressElement(Z);else if(Q==="billing")p=E.createBillingAddressElement(Z);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":p=E.createExpressCheckoutElement(m);break;case"currencySelector":p=E.createCurrencySelectorElement();break;case"taxId":p=E.createTaxIdElement(m);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else D&&(p=D.create(e,m));C.current=p,Pe(p),p&&p.mount(J.current)}},[D,E,m]);var X=V(m);return u.useEffect(function(){if(C.current){var p=ve(m,X,["paymentRequest"]);p&&"update"in C.current&&C.current.update(p)}},[m,X]),u.useLayoutEffect(function(){return function(){if(C.current&&typeof C.current.destroy=="function")try{C.current.destroy(),C.current=null}catch{}}},[]),u.createElement("div",{id:j,className:g,ref:J})},o=function(i){H("mounts <".concat(s,">"));var j=i.id,g=i.className;return u.createElement("div",{id:j,className:g})},l=t?o:a;return l.propTypes={id:c.string,className:c.string,onChange:c.func,onBlur:c.func,onFocus:c.func,onReady:c.func,onEscape:c.func,onClick:c.func,onLoadError:c.func,onLoaderStart:c.func,onNetworksChange:c.func,onConfirm:c.func,onCancel:c.func,onShippingAddressChange:c.func,onShippingRateChange:c.func,onSavedPaymentMethodRemove:c.func,onSavedPaymentMethodUpdate:c.func,options:c.object},l.displayName=s,l.__elementType=e,l},y=typeof window>"u",it=u.createContext(null);it.displayName="EmbeddedCheckoutProviderContext";var lt=function(){var e=H("calls useStripe()"),t=e.stripe;return t};x("auBankAccount",y);x("card",y);x("cardNumber",y);x("cardExpiry",y);x("cardCvc",y);x("iban",y);var ct=x("payment",y);x("expressCheckout",y);x("paymentRequestButton",y);x("linkAuthentication",y);x("address",y);x("shippingAddress",y);x("paymentMethodMessaging",y);x("taxId",y);const yt=()=>{var N,S,P,O,F;const[n,e]=I.useState(null),[t,s]=I.useState(""),[a,o]=I.useState(""),[l,d]=I.useState(null),[i,j]=I.useState("");I.useEffect(()=>{const v=localStorage.getItem("payment"),A=localStorage.getItem("paymentMethod"),U=localStorage.getItem("orderId"),M=localStorage.getItem("payment_intent");if(!v||!A||!U){k.error("No order data found"),G.visit("/cart");return}e(JSON.parse(v)),s(A),o(U),j(M||""),A==="card"&&M&&g()},[]);const g=async()=>{try{const v=await ke();if(!v){console.error("Stripe key is missing"),k.error("Payment configuration error");return}const A=Je(v);d(A)}catch(v){console.error("Error loading Stripe key:",v),k.error("Failed to load payment processor")}},b=async()=>{try{await ce(a,"completed",!0,!0),k.success("Order confirmed!"),G.visit("/checkout/step3")}catch(v){console.error("Error updating order:",v),k.error("Failed to update order status")}},w={clientSecret:i,appearance:{theme:"stripe"}};return n?r.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[r.jsx(ee,{}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("nav",{className:"flex text-sm text-gray-500 mb-6",children:[r.jsx("a",{href:"/",className:"hover:text-green-600",children:"Home"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("a",{href:"/cart",className:"hover:text-green-600",children:"Cart"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("a",{href:"/checkout/step1",className:"hover:text-green-600",children:"Checkout"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Payment"})]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Your Payment"}),r.jsx("p",{className:"text-gray-600",children:"Choose your preferred payment method"})]}),r.jsx(Oe,{currentStep:2}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[t==="card"&&i&&l&&r.jsx(ge,{stripe:l,options:w,children:r.jsx(ut,{orderId:a})}),t==="cash_on_delivery"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ae,{className:"w-20 h-20 mx-auto text-green-600 mb-4"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Cash on Delivery"}),r.jsxs("div",{className:"max-w-md mx-auto text-left bg-gray-50 rounded-lg p-6 mb-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Instructions:"}),r.jsxs("ul",{className:"space-y-2 text-gray-600",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"text-green-600 mr-2",children:"•"}),"Please have the exact amount ready when the delivery arrives"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"text-green-600 mr-2",children:"•"}),"You can pay in cash to the delivery person"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"text-green-600 mr-2",children:"•"}),"Make sure to check the items before making payment"]})]})]}),r.jsx("button",{onClick:b,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold rounded-full transition-all shadow-lg hover:shadow-xl",children:"Confirm Order"})]}),t==="bank_transfer"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Re,{className:"w-20 h-20 mx-auto text-green-600 mb-4"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Bank Transfer"}),r.jsxs("div",{className:"max-w-md mx-auto text-left bg-gray-50 rounded-lg p-6 mb-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Bank Details:"}),r.jsxs("div",{className:"space-y-3 text-gray-700",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Account Number:"}),r.jsx("span",{className:"ml-2",children:"10680-49703751"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Account Name:"}),r.jsx("span",{className:"ml-2",children:"バッデヴィターナ　イーシャン　ヤハジーワ"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Branch Code:"}),r.jsx("span",{className:"ml-2",children:"068"})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx(re,{className:"inline mr-1"}),"Please email your receipt to ",r.jsx("strong",{children:"info.iymart@gmail.com"})," with your order ID: ",r.jsx("strong",{children:a})]})})]}),r.jsx("button",{onClick:b,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold rounded-full transition-all shadow-lg hover:shadow-xl",children:"I've Made the Transfer"})]}),t==="home_delivery_2"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ie,{className:"w-20 h-20 mx-auto text-green-600 mb-4"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Home Delivery Payment"}),r.jsxs("div",{className:"max-w-md mx-auto text-left bg-gray-50 rounded-lg p-6 mb-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Available Prefectures:"}),r.jsx("ul",{className:"space-y-2 text-gray-600",children:["CHIBA KEN","SAITAMA KEN","TOKYO TO","IBARAKI KEN","KANAGAWA KEN"].map(v=>r.jsxs("li",{className:"flex items-center",children:[r.jsx("span",{className:"text-green-600 mr-2",children:"✓"}),v]},v))}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx(re,{className:"inline mr-1"}),"Our delivery person will collect payment when delivering your order"]})})]}),r.jsx("button",{onClick:b,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold rounded-full transition-all shadow-lg hover:shadow-xl",children:"Confirm Order"})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 sticky top-24",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[n.order_details?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{className:"font-semibold",children:["$",(N=n.order_details.subtotal)==null?void 0:N.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Shipping Fee"}),r.jsxs("span",{className:"font-semibold",children:["$",(S=n.order_details.shipping_cost)==null?void 0:S.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Tax"}),r.jsxs("span",{className:"font-semibold",children:["$",(P=n.order_details.tax)==null?void 0:P.toFixed(2)]})]}),n.order_details.total_discount>0&&r.jsxs("div",{className:"flex justify-between text-green-600",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{className:"font-semibold",children:["-$",(O=n.order_details.total_discount)==null?void 0:O.toFixed(2)]})]})]}):r.jsx("div",{className:"text-sm text-gray-500 italic mb-2",children:"Order breakdown not available"}),r.jsx("div",{className:"border-t border-gray-200 pt-3",children:r.jsxs("div",{className:"flex justify-between text-lg",children:[r.jsx("span",{className:"font-bold text-gray-900",children:"Total Amount"}),r.jsxs("span",{className:"font-bold text-green-600",children:["$",(((F=n.order_details)==null?void 0:F.total)??n.amount??0).toFixed(2)]})]})})]})]})})]})]}),r.jsx(te,{})]}):r.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[r.jsx(ee,{}),r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}),r.jsx(te,{})]})},ut=({orderId:n})=>{const e=lt(),t=st(),[s,a]=I.useState(!1),o=async l=>{if(l.preventDefault(),!(!e||!t)){a(!0);try{const{error:d,paymentIntent:i}=await e.confirmPayment({elements:t,confirmParams:{return_url:window.location.origin+"/checkout/step3"},redirect:"if_required"});d?k.error(d.message||"Payment failed"):i&&i.status==="succeeded"&&(await ce(n,"completed",!0,!0),k.success("Payment successful!"),G.visit("/checkout/step3"))}catch(d){console.error("Payment error:",d),k.error(d.message||"Payment failed")}finally{a(!1)}}};return r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(_e,{className:"mr-2"}),"Credit/Debit Card Payment"]}),r.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:r.jsx(ct,{})})]}),r.jsx("button",{type:"submit",disabled:!e||s,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-4 rounded-full transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Processing...":"Pay Now"})]})};export{yt as default};
