import{r as n,f as M,t as N,j as e,H as q}from"./app-BSycSqpy.js";import{B as h}from"./button-CUxHvzeS.js";import{D as O,a as H,b as z,c as B,d as R}from"./dialog-B8WnqYRL.js";import{L as x,I as p}from"./label-DteqOsHd.js";import{S as V,U as w}from"./SellerLayout-fetOk4BP.js";import{a as A}from"./SellerSidebar-bFa3B365.js";import{L as E}from"./loader-circle-B4ej4LJ_.js";import{c as g}from"./createLucideIcon-CmGTaRFo.js";import"./index-DGBZD8vQ.js";import"./index-LXIpDBDv.js";import"./index-CJqK6Fm7.js";import"./tslib.es6-BKH_Rm7U.js";import"./index-DbKhAYHR.js";import"./dropdown-menu-ynoh6QGB.js";import"./index-DH3ux_oD.js";import"./auth-CS0j0hjE.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],k=g("Lock",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],L=g("Mail",T);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],S=g("Phone",J),ce=()=>{const[v,D]=n.useState([]),[P,b]=n.useState(!0),[u,y]=n.useState(!1),[F,d]=n.useState(!1),[r,f]=n.useState({name:"",email:"",mobile:"",password:"",password_confirmation:""}),[t,i]=n.useState({});n.useEffect(()=>{_()},[]);const _=async()=>{b(!0);try{const s=await M.get("/api/users");if(s.data.status==="success"){const o=s.data.data.filter(l=>l.user_type==="admin");D(o)}}catch(s){console.error("Error fetching users:",s),N.error("Failed to load users")}finally{b(!1)}},$=async()=>{var s,o,l,m;if(i({}),!r.name.trim()){i(a=>({...a,name:"Name is required"}));return}if(!r.email.trim()){i(a=>({...a,email:"Email is required"}));return}if(!r.mobile.trim()){i(a=>({...a,mobile:"Mobile is required"}));return}if(!r.password){i(a=>({...a,password:"Password is required"}));return}if(r.password.length<8){i(a=>({...a,password:"Password must be at least 8 characters"}));return}if(r.password!==r.password_confirmation){i(a=>({...a,password_confirmation:"Passwords do not match"}));return}y(!0);try{(await M.post("/api/users/admin",{name:r.name,email:r.email,mobile:r.mobile,password:r.password,password_confirmation:r.password_confirmation})).data.status==="success"&&(N.success("Admin user created successfully"),_(),d(!1),f({name:"",email:"",mobile:"",password:"",password_confirmation:""}),i({}))}catch(a){if(console.error("Error creating user:",a),(o=(s=a.response)==null?void 0:s.data)!=null&&o.errors){const C={};Object.keys(a.response.data.errors).forEach(U=>{const j=a.response.data.errors[U];C[U]=Array.isArray(j)?j[0]:j}),i(C)}else N.error(((m=(l=a.response)==null?void 0:l.data)==null?void 0:m.message)||"Failed to create admin user")}finally{y(!1)}},c=(s,o)=>{f(l=>({...l,[s]:o})),t[s]&&i(l=>{const m={...l};return delete m[s],m})},I=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(V,{children:[e.jsx(q,{title:"Manage Admin Users"}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Users"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage administrator accounts"})]}),e.jsxs(h,{onClick:()=>d(!0),className:"gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Add Admin User"]})]}),P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(E,{className:"h-8 w-8 animate-spin text-primary"})}):v.length===0?e.jsxs("div",{className:"text-center py-12 bg-card rounded-lg border",children:[e.jsx(w,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No admin users found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by creating your first admin user"}),e.jsxs(h,{onClick:()=>d(!0),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Admin User"]})]}):e.jsx("div",{className:"bg-card rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-semibold",children:"Name"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Email"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Mobile"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-semibold",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y",children:v.map(s=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.name})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.email})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.mobile})]})}),e.jsx("td",{className:"p-4",children:s.email_verified_at?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Verified"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"})}),e.jsx("td",{className:"p-4 text-muted-foreground",children:I(s.created_at)})]},s.id))})]})})}),e.jsx(O,{open:F,onOpenChange:d,children:e.jsxs(H,{className:"sm:max-w-[500px]",children:[e.jsx(z,{children:e.jsx(B,{children:"Create Admin User"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"name",children:["Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"name",placeholder:"Enter full name",value:r.name,onChange:s=>c("name",s.target.value),className:`pl-10 ${t.name?"border-destructive":""}`})]}),t.name&&e.jsx("p",{className:"text-sm text-destructive",children:t.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"email",children:["Email ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"email",type:"email",placeholder:"admin@example.com",value:r.email,onChange:s=>c("email",s.target.value),className:`pl-10 ${t.email?"border-destructive":""}`})]}),t.email&&e.jsx("p",{className:"text-sm text-destructive",children:t.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"mobile",children:["Mobile ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"mobile",type:"tel",placeholder:"+94 or +81 format",value:r.mobile,onChange:s=>c("mobile",s.target.value),className:`pl-10 ${t.mobile?"border-destructive":""}`})]}),t.mobile&&e.jsx("p",{className:"text-sm text-destructive",children:t.mobile})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"password",children:["Password ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"password",type:"password",placeholder:"Minimum 8 characters",value:r.password,onChange:s=>c("password",s.target.value),className:`pl-10 ${t.password?"border-destructive":""}`})]}),t.password&&e.jsx("p",{className:"text-sm text-destructive",children:t.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"password_confirmation",children:["Confirm Password ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"password_confirmation",type:"password",placeholder:"Re-enter password",value:r.password_confirmation,onChange:s=>c("password_confirmation",s.target.value),className:`pl-10 ${t.password_confirmation?"border-destructive":""}`})]}),t.password_confirmation&&e.jsx("p",{className:"text-sm text-destructive",children:t.password_confirmation})]})]}),e.jsxs(R,{children:[e.jsx(h,{variant:"outline",onClick:()=>{d(!1),f({name:"",email:"",mobile:"",password:"",password_confirmation:""}),i({})},disabled:u,children:"Cancel"}),e.jsxs(h,{onClick:$,disabled:u,children:[u&&e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Admin User"]})]})]})})]})]})};export{ce as default};
