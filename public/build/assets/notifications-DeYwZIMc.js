import{r as l,e as j,t as d,j as e,L as G}from"./app-CWiOuBar.js";import{S as J}from"./SellerLayout-D-XJhX72.js";import{B as N}from"./button-Dxm4Zo-h.js";import{I as o,L as r}from"./label-DJOi4cIA.js";import{B as I}from"./badge-BFTD5jQ5.js";import{D as K,a as Q,b as W,c as X,e as Y,d as Z}from"./dialog-C7_lClPz.js";import{T as ee}from"./textarea-xFgOSWZY.js";import{S as M,a as E,b as T,c as O,d as x,C as ae}from"./select-CnAq2Yj9.js";import{D as te,a as se,b as ie,c as A}from"./dropdown-menu-_XKwrTlt.js";import{a as le,I as re,C as ne}from"./SellerSidebar-vrNB4XgO.js";import{S as de}from"./search-DWlJk53U.js";import{L as P}from"./loader-circle-CvRf3XAX.js";import{c as w}from"./createLucideIcon-BUxOv-G3.js";import{E as oe,P as ce}from"./pencil-DxWJ2GUQ.js";import{T as me}from"./trash-2-DrS9Ihmt.js";import"./index-B4dni2ra.js";import"./index-CUy8SzR8.js";import"./index-DEqCAKoJ.js";import"./tslib.es6-BUas5LQb.js";import"./index-CbP2wK5_.js";import"./index-Dyfk28tY.js";import"./index-BVvluDKG.js";import"./index-Df33P2d9.js";import"./auth-CXF110Ab.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],B=w("Calendar",xe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],pe=w("Link",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],ge=w("Megaphone",fe),qe=()=>{const[S,U]=l.useState([]),[_,f]=l.useState(!0),[$,h]=l.useState(!1),[c,C]=l.useState(!1),[k,D]=l.useState({}),[F,b]=l.useState(null),[y,L]=l.useState(null),[g,q]=l.useState(!1),[t,i]=l.useState({title:"",description:"",link:"",section:"new_arrival_banner",button_text:"",additional_field_1:"",additional_field_2:"",additional_field_3:"",additional_field_4:"",status:"active",start_date:"",end_date:""});l.useEffect(()=>{v()},[]);const v=async()=>{try{f(!0);const a=await j.get("/api/notices",{params:{all:!0,status:"all"}});a.data.status==="success"&&U(a.data.data)}catch(a){console.error("Failed to fetch notices",a),d.error("Failed to load notifications")}finally{f(!1)}},z=a=>{if(a.target.files&&a.target.files[0]){const s=a.target.files[0];L(s),b(URL.createObjectURL(s))}},R=async a=>{var p,n;if(a.preventDefault(),!y&&!c){d.error("Please upload an image");return}f(!0);const s=new FormData;s.append("title",t.title),s.append("description",t.description),s.append("link",t.link),s.append("section",t.section),t.button_text&&s.append("button_text",t.button_text),t.additional_field_1&&s.append("additional_field_1",t.additional_field_1),t.additional_field_2&&s.append("additional_field_2",t.additional_field_2),t.additional_field_3&&s.append("additional_field_3",t.additional_field_3),t.additional_field_4&&s.append("additional_field_4",t.additional_field_4),s.append("status",t.status),s.append("start_date",t.start_date),s.append("end_date",t.end_date),y&&s.append("image",y);try{let m;c&&k.id?(s.append("id",k.id.toString()),m=await j.post("/api/notices/update",s,{headers:{"Content-Type":"multipart/form-data"}})):m=await j.post("/api/notices",s,{headers:{"Content-Type":"multipart/form-data"}}),m.data.status==="success"?(d.success(c?"Notification updated successfully":"Notification created successfully"),h(!1),u(),v()):d.error(m.data.message||"Operation failed")}catch(m){console.error("Submit error:",m),d.error(((n=(p=m.response)==null?void 0:p.data)==null?void 0:n.message)||"Something went wrong")}finally{f(!1)}},V=async a=>{var s,p;if(confirm("Are you sure you want to delete this notification? This action cannot be undone."))try{const n=await j.delete("/api/notices",{data:{id:a}});n.data.status==="success"?(d.success("Notification deleted successfully"),v()):d.error(n.data.message||"Failed to delete notification")}catch(n){console.error("Delete error",n),d.error(((p=(s=n.response)==null?void 0:s.data)==null?void 0:p.message)||"Failed to delete notification")}},H=a=>{C(!0),D(a),i({title:a.title,description:a.description,link:a.link,section:a.section,button_text:a.button_text||"",additional_field_1:a.additional_field_1||"",additional_field_2:a.additional_field_2||"",additional_field_3:a.additional_field_3||"",additional_field_4:a.additional_field_4||"",status:a.status,start_date:a.start_date.split(" ")[0],end_date:a.end_date.split(" ")[0]}),b("/"+a.image),h(!0)},u=()=>{C(!1),D({}),i({title:"",description:"",link:"",section:"new_arrival_banner",button_text:"",additional_field_1:"",additional_field_2:"",additional_field_3:"",additional_field_4:"",status:"active",start_date:"",end_date:""}),b(null),L(null)};return e.jsxs(J,{children:[e.jsx(G,{title:"Notifications | Seller Center"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your promotional banners and notices"})]}),e.jsxs(N,{onClick:()=>{u(),h(!0)},className:"bg-green-600 text-white hover:bg-green-700",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Create Notification"]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(o,{placeholder:"Search notifications...",className:"pl-9 bg-white"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Details"}),e.jsx("th",{className:"px-6 py-3",children:"Section"}),e.jsx("th",{className:"px-6 py-3",children:"Duration"}),e.jsx("th",{className:"px-6 py-3",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:_?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:[e.jsx(P,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading notifications..."]})}):S.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(ge,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No notifications found"}),e.jsx("p",{children:"Create your first notification or banner to engage customers."})]})}):S.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 flex-shrink-0 bg-gray-100 rounded-md overflow-hidden border border-gray-200",children:e.jsx("img",{src:"/"+a.image,alt:a.title,className:"h-full w-full object-cover",onError:s=>{s.target.src="https://via.placeholder.com/64?text=No+Img"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:a.title}),e.jsx("div",{className:"text-gray-500 text-xs truncate max-w-xs",children:a.description}),a.link&&e.jsxs("div",{className:"flex items-center text-xs text-blue-600 mt-1",children:[e.jsx(pe,{className:"w-3 h-3 mr-1"}),a.link]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(I,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:a.section.replace(/_/g," ")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(B,{className:"w-3 h-3 mr-1 text-gray-400"}),new Date(a.start_date).toLocaleDateString()]}),e.jsx("span",{className:"text-gray-400 pl-4",children:"to"}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(B,{className:"w-3 h-3 mr-1 text-gray-400"}),new Date(a.end_date).toLocaleDateString()]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(I,{className:a.status==="active"?"bg-green-100 text-green-700 hover:bg-green-200 border-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-200",children:a.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(te,{children:[e.jsx(se,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(ie,{align:"end",children:[e.jsxs(A,{onClick:()=>H(a),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsxs(A,{className:"text-red-600",onClick:()=>V(a.id),children:[e.jsx(me,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})})]},a.id))})]})})]})]}),e.jsx(K,{open:$,onOpenChange:a=>{h(a),a||u()},children:e.jsxs(Q,{className:"max-w-4xl bg-white",children:[e.jsxs(W,{children:[e.jsx(X,{className:"text-xl font-bold",children:c?"Edit Notification":"Create Notification"}),e.jsx(Y,{children:c?"Update the notification details below.":"Enter the details for your notification banner."})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto py-4",children:e.jsx("form",{id:"notice-form",onSubmit:R,className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"image",className:"text-base font-medium flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-gray-600"}),"Banner Image ",!c&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[F&&e.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:F,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsx(o,{id:"image",type:"file",accept:"image/*",onChange:z,className:"cursor-pointer file:cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 h-auto py-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Recommended size: 1920x600px. Max file size: 2MB"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsxs(r,{htmlFor:"title",className:"text-base font-medium",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"title",required:!0,value:t.title,onChange:a=>i({...t,title:a.target.value}),placeholder:"e.g., Summer Sale - Up to 50% Off",className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsxs(r,{htmlFor:"description",className:"text-base font-medium",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ee,{id:"description",required:!0,value:t.description,onChange:a=>i({...t,description:a.target.value}),placeholder:"Enter a detailed description for this notification...",className:"h-24 bg-white resize-none"})]}),e.jsxs("div",{className:"space-y-2 col-span-2 md:col-span-1",children:[e.jsx(r,{htmlFor:"link",className:"text-base font-medium",children:"Link URL"}),e.jsx(o,{id:"link",value:t.link,onChange:a=>i({...t,link:a.target.value}),placeholder:"https://...",className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2 col-span-2 md:col-span-1",children:[e.jsx(r,{htmlFor:"button_text",className:"text-base font-medium",children:"Button Text"}),e.jsx(o,{id:"button_text",value:t.button_text,onChange:a=>i({...t,button_text:a.target.value}),placeholder:"e.g. Shop Now",className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsxs(r,{htmlFor:"section",className:"text-base font-medium",children:["Placement Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(M,{value:t.section,onValueChange:a=>i({...t,section:a}),children:[e.jsx(E,{className:"bg-white",children:e.jsx(T,{placeholder:"Select section"})}),e.jsxs(O,{className:"bg-white",children:[e.jsx(x,{value:"new_arrival_banner",children:"New Arrival Banner"}),e.jsx(x,{value:"home_slider",children:"Home Page Slider"}),e.jsx(x,{value:"offer_section",children:"Offer Section"}),e.jsx(x,{value:"shop_offer",children:"Shop Offer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"start_date",className:"text-base font-medium",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"start_date",type:"date",required:!0,value:t.start_date,onChange:a=>i({...t,start_date:a.target.value}),className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"end_date",className:"text-base font-medium",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"end_date",type:"date",required:!0,value:t.end_date,onChange:a=>i({...t,end_date:a.target.value}),className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{className:"text-base font-medium",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(M,{value:t.status,onValueChange:a=>i({...t,status:a}),children:[e.jsx(E,{className:"bg-white",children:e.jsx(T,{})}),e.jsxs(O,{className:"bg-white",children:[e.jsx(x,{value:"active",children:"Active"}),e.jsx(x,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("button",{type:"button",className:"text-sm text-green-600 font-medium hover:text-green-700 flex items-center gap-1 transition-colors",onClick:()=>q(!g),children:[g?"Hide Advanced Fields":"Show Advanced Fields",g?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(ne,{className:"w-4 h-4"})]}),g&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[[1,2,3,4].map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:`additional_field_${a}`,className:"text-xs text-gray-600",children:["Additional Field ",a]}),e.jsx(o,{id:`additional_field_${a}`,value:t[`additional_field_${a}`],onChange:s=>i({...t,[`additional_field_${a}`]:s.target.value}),placeholder:`Value ${a}`,className:"bg-white"})]},a)),e.jsx("div",{className:"col-span-2 text-xs text-gray-500",children:"* These fields are used for specific component logic and custom data."})]})]})]})})}),e.jsxs(Z,{children:[e.jsx(N,{variant:"outline",onClick:()=>{h(!1),u()},type:"button",children:"Cancel"}),e.jsxs(N,{form:"notice-form",type:"submit",disabled:_,className:"bg-green-600 text-white hover:bg-green-700",children:[_?e.jsx(P,{className:"w-4 h-4 animate-spin mr-2"}):null,c?"Update Notification":"Create Notification"]})]})]})})]})};export{qe as default};
