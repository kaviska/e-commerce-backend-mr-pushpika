import{r,e as y,t as i,j as e,L as _}from"./app-CfNo4LyL.js";import{S as $}from"./SellerLayout-BKQ2vRRh.js";import{B as d}from"./button-DYS6W9m3.js";import{I as C,L as I}from"./label-DA-TjnO8.js";import{D as z,a as O,b as U,c as A,e as T,d as q}from"./dialog-BX1goVUx.js";import{a as P,L as B}from"./SellerSidebar-Cto75vpQ.js";import{S as ee}from"./search-BBDX3mxB.js";import{L as v}from"./loader-circle-CZePyrvB.js";import{P as ae}from"./pencil-SwrZqg9E.js";import{T as se}from"./trash-2-Z6fLCdYn.js";import"./dropdown-menu-T0cWpx2O.js";import"./index-Cl-KLhKS.js";import"./index-CRPvz72I.js";import"./index-ljWjQthQ.js";import"./index-COVW5kEW.js";import"./createLucideIcon-ha3u4Tcd.js";import"./tslib.es6-BUas5LQb.js";import"./index-Do2vMDzp.js";import"./auth-BpSFxXD-.js";const be=()=>{const[Q,G]=r.useState([]),[H,S]=r.useState(!0),[h,R]=r.useState(""),[J,p]=r.useState(!1),[K,j]=r.useState(!1),[V,D]=r.useState(null),[F,L]=r.useState(null),[N,M]=r.useState(!1),[b,k]=r.useState(!1),[u,f]=r.useState({name:""});r.useEffect(()=>{g()},[]);const g=async()=>{try{S(!0);const a=await y.get("/api/variations");a.data.status==="success"&&G(a.data.data)}catch(a){console.error("Failed to fetch variations",a),i.error("Failed to load variations")}finally{S(!1)}},W=async a=>{var n,l,o,c,t,m;if(a.preventDefault(),!u.name.trim()){i.error("Variation name is required");return}M(!0);try{const s=await y.post("/api/variations",{name:u.name});s.data.status==="success"?(i.success("Variation created successfully"),p(!1),g(),x()):i.error(s.data.message||"Failed to create variation")}catch(s){console.error("Create error:",s);const w=((c=(o=(l=(n=s.response)==null?void 0:n.data)==null?void 0:l.errors)==null?void 0:o.name)==null?void 0:c[0])||((m=(t=s.response)==null?void 0:t.data)==null?void 0:m.message)||"Failed to create variation";i.error(w)}finally{M(!1)}},X=a=>{D(a),f({name:a.name}),j(!0)},Y=async a=>{var n,l,o,c,t,m;if(a.preventDefault(),!!V){k(!0);try{const s=await y.put("/api/variations",{id:V.id.toString(),name:u.name});s.data.status==="success"?(i.success("Variation updated successfully"),j(!1),g(),x()):i.error(s.data.message||"Failed to update variation")}catch(s){console.error("Update error:",s);const w=((c=(o=(l=(n=s.response)==null?void 0:n.data)==null?void 0:l.errors)==null?void 0:o.name)==null?void 0:c[0])||((m=(t=s.response)==null?void 0:t.data)==null?void 0:m.message)||"Failed to update variation";i.error(w)}finally{k(!1)}}},Z=async a=>{var n,l,o,c;if(confirm("Are you sure you want to delete this variation? This action cannot be undone.")){L(a);try{const t=await y.delete("/api/variations",{data:{id:a.toString()}});t.data.status==="success"?(i.success("Variation deleted successfully"),g()):i.error(t.data.message||"Failed to delete variation")}catch(t){console.error("Delete error:",t);const m=((l=(n=t.response)==null?void 0:n.data)==null?void 0:l.errors)||((c=(o=t.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to delete variation";i.error(m)}finally{L(null)}}},x=()=>{D(null),f({name:""})},E=Q.filter(a=>a.name.toLowerCase().includes(h.toLowerCase()));return e.jsxs($,{children:[e.jsx(_,{title:"Manage Variations | Seller Center"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Variations"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create and manage product variations (e.g., Size, Color, Material)"})]}),e.jsxs(d,{onClick:()=>{x(),p(!0)},className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Add Variation"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(C,{type:"text",placeholder:"Search variations...",value:h,onChange:a=>R(a.target.value),className:"pl-10"})]}),e.jsx("div",{className:"bg-white rounded-lg border shadow-sm",children:H?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(v,{className:"w-8 h-8 animate-spin text-primary"})}):E.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:h?"No variations found":"No variations yet"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:h?"Try adjusting your search terms":"Get started by creating your first variation"}),!h&&e.jsxs(d,{onClick:()=>{x(),p(!0)},children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Add Variation"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variation Name"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 text-gray-400 mr-3"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>X(a),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>Z(a.id),disabled:F===a.id,className:"text-red-600 hover:text-red-900 hover:bg-red-50",children:F===a.id?e.jsx(v,{className:"w-4 h-4 animate-spin"}):e.jsx(se,{className:"w-4 h-4"})})]})})]},a.id))})]})})})]}),e.jsx(z,{open:J,onOpenChange:p,children:e.jsxs(O,{children:[e.jsxs(U,{children:[e.jsx(A,{children:"Create New Variation"}),e.jsx(T,{children:"Add a new product variation like Size, Color, Material, etc."})]}),e.jsxs("form",{onSubmit:W,children:[e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{htmlFor:"create-name",children:["Variation Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{id:"create-name",value:u.name,onChange:a=>f({name:a.target.value}),placeholder:"e.g., Size, Color, Material",required:!0})]})}),e.jsxs(q,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{p(!1),x()},disabled:N,children:"Cancel"}),e.jsxs(d,{type:"submit",disabled:N,children:[N&&e.jsx(v,{className:"w-4 h-4 mr-2 animate-spin"}),"Create Variation"]})]})]})]})}),e.jsx(z,{open:K,onOpenChange:j,children:e.jsxs(O,{children:[e.jsxs(U,{children:[e.jsx(A,{children:"Edit Variation"}),e.jsx(T,{children:"Update the variation name"})]}),e.jsxs("form",{onSubmit:Y,children:[e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{htmlFor:"edit-name",children:["Variation Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{id:"edit-name",value:u.name,onChange:a=>f({name:a.target.value}),placeholder:"e.g., Size, Color, Material",required:!0})]})}),e.jsxs(q,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{j(!1),x()},disabled:b,children:"Cancel"}),e.jsxs(d,{type:"submit",disabled:b,children:[b&&e.jsx(v,{className:"w-4 h-4 mr-2 animate-spin"}),"Update Variation"]})]})]})]})})]})};export{be as default};
