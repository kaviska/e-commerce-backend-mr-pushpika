import{r as t,t as f,a as y,j as e,L as r}from"./app-B1e7NyTU.js";import{N as l,F as d}from"./Footer-DoS4I4ro.js";import{x,y as v,z as w,a as n,l as _,k as o,h as F,j as C,i as L,q as m,A as O,B as k}from"./index-Cr-Nnvgb.js";import{g as S}from"./order-Bmzfkmrb.js";import"./logo-D38OwFmG.js";import"./auth-CaAddT7o.js";const T=({orderId:i})=>{const[s,h]=t.useState(null),[g,j]=t.useState(!0);t.useEffect(()=>{p()},[i]);const p=async()=>{try{const a=await S(i);h(a)}catch(a){console.error("Error loading order details:",a),f.error("Failed to load order details"),setTimeout(()=>y.visit("/orders"),2e3)}finally{j(!1)}},N=a=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",processing:"bg-blue-100 text-blue-800 border-blue-200",shipped:"bg-purple-100 text-purple-800 border-purple-200",delivered:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200",completed:"bg-green-100 text-green-800 border-green-200"})[a.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-200",b=a=>({pending:e.jsx(k,{className:"w-5 h-5"}),processing:e.jsx(n,{className:"w-5 h-5"}),shipped:e.jsx(O,{className:"w-5 h-5"}),delivered:e.jsx(m,{className:"w-5 h-5"}),cancelled:e.jsx(x,{className:"w-5 h-5"}),completed:e.jsx(m,{className:"w-5 h-5"})})[a.toLowerCase()]||e.jsx(n,{className:"w-5 h-5"}),u=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return g?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(l,{}),e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}),e.jsx(d,{})]}):s?e.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[e.jsx(l,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("nav",{className:"flex text-sm text-gray-500 mb-6",children:[e.jsx(r,{href:"/",className:"hover:text-green-600",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(r,{href:"/orders",className:"hover:text-green-600",children:"My Orders"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["Order #",s.order_number]})]}),e.jsxs(r,{href:"/orders",className:"inline-flex items-center gap-2 text-gray-600 hover:text-green-600 mb-6 font-medium",children:[e.jsx(v,{className:"w-5 h-5"}),"Back to Orders"]}),e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl shadow-lg p-6 md:p-8 mb-6 text-white",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Order #",s.order_number]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-100",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsxs("span",{children:["Placed on ",u(s.created_at)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-green-100 text-sm mb-1",children:"Total Amount"}),e.jsxs("div",{className:"text-4xl font-bold",children:["LKR ",s.total.toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Status"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-3 px-6 py-3 rounded-xl border-2 ${N(s.order_status)}`,children:[b(s.order_status),e.jsx("span",{className:"font-bold text-lg uppercase",children:s.order_status})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg border ${s.payment_status==="paid"?"bg-green-50 text-green-700 border-green-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:e.jsxs("span",{className:"font-semibold",children:["Payment: ",s.payment_status.toUpperCase()]})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white p-6 border-b border-gray-100",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(n,{className:"text-green-600"}),"Order Items (",s.order_items.length,")"]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:s.order_items.map(a=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-2",children:a.product_name}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",a.category]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Brand:"})," ",a.brand]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Unit Price:"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["LKR ",a.unit_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsx("span",{className:"font-bold text-gray-900",children:a.unit_quantity})]}),a.unit_discount>0&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{className:"font-bold",children:[a.unit_discount,"%"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Subtotal"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["LKR ",a.line_total.toFixed(2)]})]})]})},a.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["LKR ",s.subtotal.toFixed(2)]})]}),s.total_discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-semibold",children:["-LKR ",s.total_discount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{className:"font-semibold",children:["LKR ",s.tax.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{className:"font-semibold",children:["LKR ",s.shipping_cost.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"font-bold text-green-600",children:["LKR ",s.total.toFixed(2)]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"text-green-600"}),"Payment Info"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Method"}),e.jsx("span",{className:"font-semibold text-gray-900 uppercase",children:s.payment_method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Gateway"}),e.jsx("span",{className:"font-semibold text-gray-900 uppercase",children:s.payment_gateway||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment ID"}),e.jsx("span",{className:"font-mono text-xs text-gray-900",children:s.payment_id||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Currency"}),e.jsx("span",{className:"font-semibold text-gray-900 uppercase",children:s.currency})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"text-green-600"}),"Shipping Address"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-gray-400 mt-1 flex-shrink-0"}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-gray-900",children:s.user_name})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-gray-400 mt-1 flex-shrink-0"}),e.jsx("div",{className:"text-gray-700",children:s.user_phone})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-gray-400 mt-1 flex-shrink-0"}),e.jsx("div",{className:"text-gray-700 break-all",children:s.user_email})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("div",{children:s.user_address_line1}),s.user_address_line2&&e.jsx("div",{children:s.user_address_line2}),e.jsxs("div",{children:[s.user_city,", ",s.user_prefecture]}),e.jsx("div",{children:s.user_region}),e.jsx("div",{children:s.user_postal_code}),e.jsx("div",{children:s.user_country})]})]})]})]})]})]})]}),e.jsx(d,{})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(l,{}),e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(x,{className:"w-20 h-20 mx-auto text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),e.jsx(r,{href:"/orders",className:"text-green-600 hover:text-green-700 font-semibold",children:"Return to Orders"})]})}),e.jsx(d,{})]})};export{T as default};
