import{r as l,t as f,j as e,L as i}from"./app-B1e7NyTU.js";import{N as c,F as o}from"./Footer-DoS4I4ro.js";import{r as x,a as n,z as v,u as w,q as m,x as _,A as F,B as C}from"./index-Cr-Nnvgb.js";import{a as L}from"./order-Bmzfkmrb.js";import"./logo-D38OwFmG.js";import"./auth-CaAddT7o.js";const R=()=>{const[a,h]=l.useState([]),[g,p]=l.useState(!0),[t,j]=l.useState("all");l.useEffect(()=>{b()},[]);const b=async()=>{try{const s=await L();h(s||[])}catch(s){console.error("Error loading orders:",s),f.error("Failed to load orders")}finally{p(!1)}},y=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",processing:"bg-blue-100 text-blue-800 border-blue-200",shipped:"bg-purple-100 text-purple-800 border-purple-200",delivered:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200",completed:"bg-green-100 text-green-800 border-green-200"})[s.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-200",u=s=>({pending:e.jsx(C,{className:"w-4 h-4"}),processing:e.jsx(n,{className:"w-4 h-4"}),shipped:e.jsx(F,{className:"w-4 h-4"}),delivered:e.jsx(m,{className:"w-4 h-4"}),cancelled:e.jsx(_,{className:"w-4 h-4"}),completed:e.jsx(m,{className:"w-4 h-4"})})[s.toLowerCase()]||e.jsx(n,{className:"w-4 h-4"}),N=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=t==="all"?a:a.filter(s=>s.order_status.toLowerCase()===t);return g?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(c,{}),e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}),e.jsx(o,{})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[e.jsx(c,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("nav",{className:"flex text-sm text-gray-500 mb-6",children:[e.jsx(i,{href:"/",className:"hover:text-green-600",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"My Orders"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center mb-2",children:[e.jsx(x,{className:"mr-3 text-green-600"}),"My Orders"]}),e.jsx("p",{className:"text-gray-600",children:"Track and manage your orders"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","processing","shipped","delivered","cancelled"].map(s=>e.jsxs("button",{onClick:()=>j(s),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${t===s?"bg-green-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.charAt(0).toUpperCase()+s.slice(1),s==="all"&&` (${a.length})`,s!=="all"&&` (${a.filter(r=>r.order_status.toLowerCase()===s).length})`]},s))})}),d.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[e.jsx(n,{className:"w-20 h-20 mx-auto text-gray-300 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Orders Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:t==="all"?"You haven't placed any orders yet.":`You don't have any ${t} orders.`}),e.jsxs(i,{href:"/products",className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors font-semibold",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),"Start Shopping"]})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Order #",s.order_number]}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold border ${y(s.order_status)}`,children:[u(s.order_status),s.order_status]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(v,{className:"w-4 h-4"}),N(s.created_at)]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(n,{className:"w-4 h-4"}),s.order_items.length," ",s.order_items.length===1?"item":"items"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["LKR ",s.total.toFixed(2)]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[s.order_items.slice(0,2).map(r=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate mb-1",children:r.product_name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Qty: ",r.unit_quantity]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["LKR ",r.unit_price.toFixed(2)," each"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"font-bold text-gray-900",children:["LKR ",r.line_total.toFixed(2)]})})]},r.id)),s.order_items.length>2&&e.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["+ ",s.order_items.length-2," more ",s.order_items.length-2===1?"item":"items"]})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment: "}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.payment_method.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Status: "}),e.jsx("span",{className:`font-semibold ${s.payment_status==="paid"?"text-green-600":"text-orange-600"}`,children:s.payment_status})]})]}),e.jsxs(i,{href:`/orders/${s.id}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-white text-green-600 border border-green-600 rounded-full hover:bg-green-50 transition-colors font-semibold text-sm",children:[e.jsx(w,{className:"w-4 h-4"}),"View Details"]})]})})]},s.id))})]}),e.jsx(o,{})]})};export{R as default};
