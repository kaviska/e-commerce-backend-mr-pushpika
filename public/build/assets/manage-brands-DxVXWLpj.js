import{r as t,f,t as l,j as e,H as $}from"./app-Dmq_v5yT.js";import{S as q}from"./SellerLayout-yR8nWqMp.js";import{B as j}from"./button-DSfbffQ8.js";import{I as y,L as E}from"./label-BqwrHOzj.js";import{D as z,a as V,b as _,c as G,e as J,d as K}from"./dialog-C5VgILUB.js";import{D as W,a as X,b as Y,c as L}from"./dropdown-menu-CVgMBWG6.js";import{S as Z}from"./search-BGzyKUZI.js";import{L as N}from"./loader-circle-C4PZnu-O.js";import{T}from"./SellerSidebar-BbhqYCMZ.js";import{E as ee}from"./ellipsis-vertical-B28AjPTg.js";import{P as ae}from"./pencil-Be-KRgGE.js";import{T as se}from"./trash-2-9lDAIQyx.js";import"./createLucideIcon-DZc_IOCv.js";import"./index-D4-owJlT.js";import"./index-BPaTVwo6.js";import"./index-B7Ubbbks.js";import"./index-CW-dqnj-.js";import"./tslib.es6-BKH_Rm7U.js";import"./index-b4boaPSw.js";import"./auth-DiJPeYeS.js";const ve=()=>{const[U,M]=t.useState([]),[P,b]=t.useState(!0),[o,O]=t.useState(""),[k,i]=t.useState(!1),[c,w]=t.useState(null),[d,v]=t.useState(null),[m,S]=t.useState(!1),[D,x]=t.useState(null),[B,h]=t.useState(null),[p,g]=t.useState({name:""});t.useEffect(()=>{u()},[]);const u=async()=>{try{b(!0);const a=await f.get("/api/brands");a.data.status==="success"&&M(a.data.data)}catch(a){console.error("Failed to fetch brands",a),l.error("Failed to load brands")}finally{b(!1)}},H=a=>{if(a.target.files&&a.target.files[0]){const r=a.target.files[0];x(r),h(URL.createObjectURL(r))}},R=a=>{w(a),g({name:a.name}),h(a.image?"/"+a.image:null),x(null),i(!0)},A=async a=>{var r,n;if(a.preventDefault(),!!c){S(!0);try{const s=new FormData;s.append("id",c.id.toString()),s.append("name",p.name),D&&s.append("image",D);const F=await f.post(`/api/brands/update/${c.id}`,s);F.data.status==="success"?(l.success("Brand updated successfully"),i(!1),u(),C()):l.error(F.data.message||"Failed to update brand")}catch(s){console.error("Update error:",s),l.error(((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update brand")}finally{S(!1)}}},Q=async a=>{var r,n;if(confirm("Are you sure you want to delete this brand? This action cannot be undone.")){v(a);try{const s=await f.delete("/api/brands",{data:{id:a.toString()}});s.data.status==="success"?(l.success("Brand deleted successfully"),u()):l.error(s.data.message||"Failed to delete brand")}catch(s){console.error("Delete error:",s),l.error(((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete brand")}finally{v(null)}}},C=()=>{w(null),g({name:""}),x(null),h(null)},I=U.filter(a=>a.name.toLowerCase().includes(o.toLowerCase()));return e.jsxs(q,{children:[e.jsx($,{title:"Manage Brands | Seller Center"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Brands"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Edit or delete your brands"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(y,{placeholder:"Search brands...",className:"pl-9 bg-white",value:o,onChange:a=>O(a.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"ID"}),e.jsx("th",{className:"px-6 py-3",children:"Image"}),e.jsx("th",{className:"px-6 py-3",children:"Brand Name"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:P?e.jsx("tr",{children:e.jsxs("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:[e.jsx(N,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading brands..."]})}):I.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(T,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No brands found"}),e.jsx("p",{children:o?"Try a different search term":"Create your first brand to get started"})]})}):I.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["#",a.id]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 overflow-hidden flex items-center justify-center",children:a.image?e.jsx("img",{src:`/${a.image}`,alt:a.name,className:"h-full w-full object-cover"}):e.jsx(T,{className:"h-6 w-6 text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:a.name})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(W,{children:[e.jsx(X,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500",disabled:d===a.id,children:d===a.id?e.jsx(N,{className:"h-4 w-4 animate-spin"}):e.jsx(ee,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",className:"bg-white",children:[e.jsxs(L,{onClick:()=>R(a),disabled:d!==null,children:[e.jsx(ae,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsxs(L,{className:"text-red-600",onClick:()=>Q(a.id),disabled:d!==null,children:[e.jsx(se,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})})]},a.id))})]})})]})]}),e.jsx(z,{open:k,onOpenChange:i,children:e.jsxs(V,{className:"max-w-md bg-white",children:[e.jsxs(_,{children:[e.jsx(G,{children:"Edit Brand"}),e.jsx(J,{children:"Update the brand name below."})]}),e.jsxs("form",{id:"edit-brand-form",onSubmit:A,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"name",children:"Brand Name"}),e.jsx(y,{id:"name",required:!0,value:p.name,onChange:a=>g({...p,name:a.target.value}),placeholder:"Brand Name",className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"image",children:"Brand Image"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[B&&e.jsx("div",{className:"w-full h-40 bg-gray-100 rounded-md overflow-hidden border border-gray-200",children:e.jsx("img",{src:B,alt:"Preview",className:"w-full h-full object-contain"})}),e.jsx(y,{id:"image",type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:H,className:"bg-white"})]})]})]}),e.jsxs(K,{children:[e.jsx(j,{variant:"outline",onClick:()=>{i(!1),C()},disabled:m,children:"Cancel"}),e.jsxs(j,{form:"edit-brand-form",type:"submit",disabled:m,className:"bg-green-600 text-white hover:bg-green-700",children:[m?e.jsx(N,{className:"w-4 h-4 animate-spin mr-2"}):null,"Update Brand"]})]})]})})]})};export{ve as default};
