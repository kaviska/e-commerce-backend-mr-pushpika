import{r as i,t as g,j as e,L as E}from"./app-CWiOuBar.js";import{S as M}from"./SellerLayout-D-XJhX72.js";import{a as k,b as A}from"./seller-EGUTzyBc.js";import{B as x}from"./button-Dxm4Zo-h.js";import{I as d,L as h}from"./label-DJOi4cIA.js";import{D as F,a as O,b as I,c as B,d as Q}from"./dialog-C7_lClPz.js";import{a as T,L as w}from"./SellerSidebar-vrNB4XgO.js";import{S as H}from"./search-DWlJk53U.js";import{L as P}from"./loader-circle-CvRf3XAX.js";import"./dropdown-menu-_XKwrTlt.js";import"./index-CbP2wK5_.js";import"./index-B4dni2ra.js";import"./index-Df33P2d9.js";import"./index-DEqCAKoJ.js";import"./createLucideIcon-BUxOv-G3.js";import"./tslib.es6-BUas5LQb.js";import"./index-CUy8SzR8.js";import"./auth-CXF110Ab.js";const te=()=>{const[v,b]=i.useState([]),[u,p]=i.useState(!0),[m,L]=i.useState(""),[S,c]=i.useState(!1),[o,n]=i.useState({name:"",slug:"",image:null});i.useEffect(()=>{f()},[]);const f=async()=>{p(!0);try{const s=await k();s.status==="success"&&b(s.data)}catch(s){console.error("Error fetching categories:",s),g.error("Failed to load categories")}finally{p(!1)}},y=v.filter(s=>s.name.toLowerCase().includes(m.toLowerCase())||s.slug.toLowerCase().includes(m.toLowerCase())),D=async()=>{var s,j,C,N;try{const r=new FormData;r.append("name",o.name),r.append("slug",o.slug),o.image&&r.append("image",o.image);const a=await A(r);if(a.status==="success")g.success("Category created successfully"),f(),c(!1),n({name:"",slug:"",image:null});else{let t="Failed to create category";if(typeof a.errors=="string")t=a.errors;else if(typeof a.errors=="object"&&a.errors!==null){const l=Object.values(a.errors)[0];t=Array.isArray(l)?l[0]:l}else a.message&&(t=a.message);g.error(t)}}catch(r){let a="Failed to create category";const t=(j=(s=r.response)==null?void 0:s.data)==null?void 0:j.errors;if(typeof t=="string")a=t;else if(typeof t=="object"&&t!==null){const l=Object.values(t)[0];a=Array.isArray(l)?l[0]:l}else(N=(C=r.response)==null?void 0:C.data)!=null&&N.message?a=r.response.data.message:r.message&&(a=r.message);g.error(a)}};return e.jsxs(M,{children:[e.jsx(E,{title:"Manage Categories"}),e.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Categories"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage product categories or create new ones."})]}),e.jsxs(x,{onClick:()=>c(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Create Category"]})]}),e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(H,{className:"h-5 w-5 text-gray-400"})}),e.jsx(d,{placeholder:"Search categories...",className:"pl-11 h-12 text-lg bg-white shadow-sm border-gray-200 focus:border-green-500 focus:ring-green-500 rounded-xl",value:m,onChange:s=>L(s.target.value)})]}),u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(P,{className:"h-10 w-10 animate-spin text-green-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading categories..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:y.map(s=>e.jsxs("div",{className:"group bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-200 p-5 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center flex-shrink-0 overflow-hidden",children:s.image?e.jsx("img",{src:`/${s.image}`,alt:s.name,className:"h-full w-full object-cover"}):e.jsx(w,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.slug})]})]},s.id))}),!u&&y.length===0&&e.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[e.jsx(w,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No categories found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Try searching for something else or create a new category."})]})]}),e.jsx(F,{open:S,onOpenChange:c,children:e.jsxs(O,{className:"bg-white",children:[e.jsx(I,{children:e.jsx(B,{children:"Create Category"})}),e.jsxs("div",{className:"space-y-4 py-4 bg-white",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Category Name"}),e.jsx(d,{placeholder:"Category Name",value:o.name,onChange:s=>n({...o,name:s.target.value,slug:s.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Slug"}),e.jsx(d,{placeholder:"category-slug",value:o.slug,onChange:s=>n({...o,slug:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Image"}),e.jsx(d,{type:"file",onChange:s=>s.target.files&&n({...o,image:s.target.files[0]})})]})]}),e.jsxs(Q,{children:[e.jsx(x,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(x,{onClick:D,className:"bg-green-600 hover:bg-green-700 text-white",children:"Create"})]})]})})]})};export{te as default};
