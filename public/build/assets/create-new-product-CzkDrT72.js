import{r as l,e as x,j as e,L as V,S as C,t as g}from"./app-CWiOuBar.js";import{S as q}from"./SellerLayout-D-XJhX72.js";import{B as d}from"./button-Dxm4Zo-h.js";import{L as i,I as p}from"./label-DJOi4cIA.js";import{S,a as _,b as B,c as D,d as k}from"./select-CnAq2Yj9.js";import{C as z}from"./checkbox-tteav3Kx.js";import{D as A,a as M,b as U,c as $,d as H}from"./dialog-C7_lClPz.js";import{I as W}from"./SellerSidebar-vrNB4XgO.js";import{X}from"./index-CUy8SzR8.js";import{L as G}from"./loader-circle-CvRf3XAX.js";import"./dropdown-menu-_XKwrTlt.js";import"./index-CbP2wK5_.js";import"./index-B4dni2ra.js";import"./index-Df33P2d9.js";import"./index-DEqCAKoJ.js";import"./createLucideIcon-BUxOv-G3.js";import"./tslib.es6-BUas5LQb.js";import"./index-Dyfk28tY.js";import"./index-BVvluDKG.js";import"./auth-CXF110Ab.js";const he=()=>{const[b,f]=l.useState(!1),[L,P]=l.useState([]),[F,I]=l.useState([]),[s,n]=l.useState({name:"",description:"",category_id:"",brand_id:"",web_availability:!1,primary_image:[]}),[E,u]=l.useState(!1),[t,h]=l.useState({name:"",slug:"",image:null}),[y,j]=l.useState(null);l.useEffect(()=>{O(),v()},[]);const O=async()=>{try{const a=await x.get("/api/categories");a.data.status==="success"&&P(a.data.data)}catch(a){console.error("Error fetching categories:",a)}},v=async()=>{try{const a=await x.get("/api/brands");a.data.status==="success"&&I(a.data.data)}catch(a){console.error("Error fetching brands:",a)}},T=async a=>{var o,m;a.preventDefault(),f(!0);try{const r=new FormData;r.append("name",s.name),r.append("description",s.description),r.append("category_id",s.category_id),r.append("brand_id",s.brand_id),s.web_availability&&r.append("web_availability","1"),s.primary_image.length>0&&r.append("primary_image",s.primary_image[0]);const w=await x.post("/api/add/products",r,{headers:{"Content-Type":"multipart/form-data"}});w.data.status==="success"?(g.success("Product created successfully"),C.visit("/seller/products/add-existing")):g.error(w.data.message||"Failed to create product")}catch(r){console.error("Error creating product:",r),g.error(((m=(o=r.response)==null?void 0:o.data)==null?void 0:m.message)||"Failed to create product")}finally{f(!1)}},R=async()=>{try{const a=new FormData;a.append("name",t.name),a.append("slug",t.slug),t.image&&a.append("image",t.image),(await x.post("/api/brands",a,{headers:{"Content-Type":"multipart/form-data"}})).data.status==="success"&&(g.success("Brand created successfully"),v(),u(!1),h({name:"",slug:"",image:null}))}catch{g.error("Failed to create brand")}},c="h-12 bg-white shadow-sm border-gray-200 focus:border-green-500 focus:ring-green-500 rounded-xl",N="bg-green-600 hover:bg-green-700 text-white rounded-lg";return e.jsxs(q,{children:[e.jsx(V,{title:"Create New Product"}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Create New Product"}),e.jsx("p",{className:"text-sm text-gray-500 text-lg",children:"Add a new product to the global catalog."})]}),e.jsxs("form",{onSubmit:T,className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",className:"text-base font-medium text-gray-900",children:"Product Name"}),e.jsx(p,{id:"name",placeholder:"e.g. Premium Butter 200g",className:c,value:s.name,onChange:a=>n({...s,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",className:"text-base font-medium text-gray-900",children:"Description"}),e.jsx("textarea",{id:"description",className:"flex min-h-[120px] w-full rounded-xl border border-gray-200 bg-white px-3 py-3 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:border-green-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",placeholder:"Describe the product...",value:s.description,onChange:a=>n({...s,description:a.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-base font-medium text-gray-900",children:"Category"}),e.jsxs(S,{value:s.category_id,onValueChange:a=>n({...s,category_id:a}),children:[e.jsx(_,{className:c,children:e.jsx(B,{placeholder:"Select Category"})}),e.jsx(D,{className:"bg-white",children:L.map(a=>e.jsx(k,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-base font-medium text-gray-900",children:"Brand"}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 text-green-600 hover:text-green-700 font-medium",onClick:()=>u(!0),children:"+ New Brand"})]}),e.jsxs(S,{value:s.brand_id,onValueChange:a=>n({...s,brand_id:a}),children:[e.jsx(_,{className:c,children:e.jsx(B,{placeholder:"Select Brand"})}),e.jsx(D,{className:"bg-white",children:F.map(a=>e.jsx(k,{value:a.id.toString(),children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"text-base font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-gray-600"}),"Primary Image"]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 space-y-4",children:[e.jsx(p,{type:"file",accept:"image/*",onChange:a=>{var m;const o=(m=a.target.files)==null?void 0:m[0];o&&(n({...s,primary_image:[o]}),j(URL.createObjectURL(o)))},className:"cursor-pointer file:cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 h-auto py-2"}),y&&e.jsxs("div",{className:"relative w-40 h-40 rounded-xl overflow-hidden border border-gray-200",children:[e.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(d,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-8 w-8 bg-white/80 hover:bg-white rounded-full transition-colors",onClick:()=>{n({...s,primary_image:[]}),j(null)},children:e.jsx(X,{className:"h-5 w-5 text-gray-500"})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx(z,{id:"web_availability",checked:s.web_availability,onCheckedChange:a=>n({...s,web_availability:a}),className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),e.jsx(i,{htmlFor:"web_availability",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Available on Web Store"})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>C.visit("/seller/products/add-existing"),className:"h-12 px-6 rounded-xl border-gray-200",children:"Cancel"}),e.jsxs(d,{type:"submit",className:`${N} h-12 px-8 rounded-xl font-medium text-base`,disabled:b,children:[b&&e.jsx(G,{className:"mr-2 h-5 w-5 animate-spin"}),"Create Product"]})]})]})]}),e.jsx(A,{open:E,onOpenChange:u,children:e.jsxs(M,{className:"bg-white rounded-2xl",children:[e.jsx(U,{children:e.jsx($,{children:"Create Brand"})}),e.jsxs("div",{className:"space-y-4 py-4 bg-white",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Brand Name"}),e.jsx(p,{placeholder:"Brand Name",className:c,value:t.name,onChange:a=>h({...t,name:a.target.value,slug:a.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Slug"}),e.jsx(p,{placeholder:"brand-slug",className:c,value:t.slug,onChange:a=>h({...t,slug:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Logo"}),e.jsx(p,{type:"file",className:"h-12 pt-2",onChange:a=>a.target.files&&h({...t,image:a.target.files[0]})})]})]}),e.jsxs(H,{children:[e.jsx(d,{variant:"outline",onClick:()=>u(!1),className:"rounded-xl",children:"Cancel"}),e.jsx(d,{onClick:R,className:`${N} rounded-xl`,children:"Create"})]})]})})]})};export{he as default};
