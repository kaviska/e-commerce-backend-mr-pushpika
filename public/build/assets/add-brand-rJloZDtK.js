import{r as o,t as d,j as e,L as k}from"./app-BevSkdG7.js";import{B as h}from"./button-DoIombom.js";import{D as A,a as F,b as O,c as I,d as T}from"./dialog-B1MP9hr-.js";import{I as m,L as u}from"./label-BHSfXJoT.js";import{g as Q,c as H}from"./seller-uIV9mca_.js";import{S as P}from"./SellerLayout-CTbuJ4A_.js";import{a as R,T as C}from"./SellerSidebar-BlXJOl8A.js";import{S as $}from"./search-I-W0diZz.js";import{L as B}from"./loader-circle-yeZcuZFh.js";import"./index-CqE6tAZT.js";import"./createLucideIcon-B2Y984Ia.js";import"./index-C9iIj63M.js";import"./tslib.es6-BUas5LQb.js";import"./index-Dn5UhpWC.js";import"./index-DzPF9EFL.js";import"./dropdown-menu-DVRQD0v4.js";import"./index-CeNcb58v.js";import"./auth-BlSIcDT4.js";const ne=()=>{const[L,S]=o.useState([]),[f,p]=o.useState(!0),[g,j]=o.useState(!1),[x,D]=o.useState(""),[E,i]=o.useState(!1),[l,c]=o.useState({name:"",slug:"",image:null});o.useEffect(()=>{y()},[]);const y=async()=>{p(!0);try{const s=await Q();s.status==="success"&&S(s.data)}catch(s){console.error("Error fetching brands:",s),d.error("Failed to load brands")}finally{p(!1)}},b=L.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())||s.slug.toLowerCase().includes(x.toLowerCase())),M=async()=>{var s,N,w,v;j(!0);try{const r=new FormData;r.append("name",l.name),r.append("slug",l.slug),l.image&&r.append("image",l.image);const a=await H(r);if(a.status==="success")d.success("Brand created successfully"),y(),i(!1),c({name:"",slug:"",image:null});else{let t="Failed to create brand";if(typeof a.errors=="string")t=a.errors;else if(typeof a.errors=="object"&&a.errors!==null){const n=Object.values(a.errors)[0];t=Array.isArray(n)?n[0]:n}else a.message&&(t=a.message);d.error(t)}}catch(r){let a="Failed to create brand";const t=(N=(s=r.response)==null?void 0:s.data)==null?void 0:N.errors;if(typeof t=="string")a=t;else if(typeof t=="object"&&t!==null){const n=Object.values(t)[0];a=Array.isArray(n)?n[0]:n}else(v=(w=r.response)==null?void 0:w.data)!=null&&v.message?a=r.response.data.message:r.message&&(a=r.message);d.error(a)}finally{j(!1)}};return e.jsxs(P,{children:[e.jsx(k,{title:"Manage Brands"}),e.jsxs("div",{className:"mx-auto max-w-7xl space-y-8",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Brands"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Manage product brands or create new ones."})]}),e.jsxs(h,{onClick:()=>i(!0),className:"bg-green-600 text-white hover:bg-green-700",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Create Brand"]})]}),e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:e.jsx($,{className:"h-5 w-5 text-gray-400"})}),e.jsx(m,{placeholder:"Search brands...",className:"h-12 rounded-xl border-gray-200 bg-white pl-11 text-lg shadow-sm focus:border-green-500 focus:ring-green-500",value:x,onChange:s=>D(s.target.value)})]}),f?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(B,{className:"mb-4 h-10 w-10 animate-spin text-green-600"}),e.jsx("p",{className:"text-gray-500",children:"Loading brands..."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:b.map(s=>e.jsxs("div",{className:"group flex items-center gap-4 rounded-xl border border-gray-100 bg-white p-5 shadow-sm transition-all duration-200 hover:shadow-md",children:[e.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center overflow-hidden rounded-lg bg-gray-100",children:s.logo?e.jsx("img",{src:`/${s.logo}`,alt:s.name,className:"h-full w-full object-cover"}):e.jsx(C,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"truncate text-sm text-gray-500",children:s.slug})]})]},s.id))}),!f&&b.length===0&&e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-gray-50 py-20 text-center",children:[e.jsx(C,{className:"mx-auto mb-4 h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No brands found"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Try searching for something else or create a new brand."})]})]}),e.jsx(A,{open:E,onOpenChange:i,children:e.jsxs(F,{className:"bg-white",children:[e.jsx(O,{children:e.jsx(I,{children:"Create Brand"})}),e.jsxs("div",{className:"space-y-4 bg-white py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Brand Name"}),e.jsx(m,{placeholder:"Brand Name",value:l.name,onChange:s=>c({...l,name:s.target.value,slug:s.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Slug"}),e.jsx(m,{placeholder:"brand-slug",value:l.slug,onChange:s=>c({...l,slug:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Logo"}),e.jsx(m,{type:"file",onChange:s=>s.target.files&&c({...l,image:s.target.files[0]})})]})]}),e.jsxs(T,{children:[e.jsx(h,{variant:"outline",onClick:()=>i(!1),disabled:g,children:"Cancel"}),e.jsxs(h,{onClick:M,className:"bg-green-600 text-white hover:bg-green-700",disabled:g,children:[g&&e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})})]})};export{ne as default};
