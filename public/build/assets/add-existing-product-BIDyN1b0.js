import{r as s,j as e,t as _,f as Me,H as Et}from"./app-CgcuHfcV.js";import{S as It}from"./SellerLayout-BQ6E32iX.js";import{d as Ot,e as Vt,f as At,g as Ft,a as Dt,c as $t}from"./seller-D-3AR1kO.js";import{B as V}from"./button-Cohb5s7o.js";import{I as M,L as D}from"./label-PlmXA06j.js";import{D as Ie,a as Oe,b as Ve,c as Ae,e as He,d as Fe}from"./dialog-BdEab6bY.js";import{C as Lt}from"./checkbox-_jkCkQeH.js";import{T as Mt}from"./textarea-MncRj-27.js";import{S as Ue,a as Ge,b as We,c as Qe,d as ke}from"./select-BxtlDTKh.js";import{u as Tt,c as ge,P as Xe}from"./index-Dlg8Dh6T.js";import{a as de,u as Ze,c as Z}from"./index-khSbgmmG.js";import{P as Bt,h as zt,R as qt,u as Kt,F as Ht,D as Ut,a as Gt,b as Wt,O as Qt,C as Xt,X as be}from"./index-CJQ1CjOf.js";import{u as ae}from"./index-DbJ4XrGX.js";import{c as Je,R as Zt,A as Ye,C as Jt,a as Yt}from"./index-G6RhP6wp.js";import{P as J}from"./index-xVpn745B.js";import{S as et}from"./search-CoFUMz3D.js";import{U as er,C as tr}from"./upload-CcwfmAmb.js";import{C as rr}from"./chevrons-up-down-v_p_d4Ay.js";import{C as ie}from"./index-BAfHTWwu.js";import{a as we}from"./auth-OXswbwCF.js";import{P as ve,a as pe,I as fe,L as Pe}from"./SellerSidebar-DiSXodgc.js";import{c as De}from"./createLucideIcon-L111TtY5.js";import{P as Te}from"./percent-BfPiGmU8.js";import{T as ar}from"./trash-2-DLQfhOHB.js";import{L as Ne}from"./loader-circle-gW5wr0i7.js";import{A as sr}from"./arrow-right-DAIIVvKR.js";import"./index-Dm-BJdsp.js";import"./index-CiKEIPUA.js";import"./tslib.es6-BKH_Rm7U.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],or=De("FileText",nr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],lr=De("PenLine",ir);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],dr=De("Type",cr);function ur(t,a=[]){let r=[];function o(i,u){const m=s.createContext(u),h=r.length;r=[...r,u];const p=j=>{var B;const{scope:v,children:S,...N}=j,A=((B=v==null?void 0:v[t])==null?void 0:B[h])||m,k=s.useMemo(()=>N,Object.values(N));return e.jsx(A.Provider,{value:k,children:S})};p.displayName=i+"Provider";function f(j,v){var A;const S=((A=v==null?void 0:v[t])==null?void 0:A[h])||m,N=s.useContext(S);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${j}\` must be used within \`${i}\``)}return[p,f]}const n=()=>{const i=r.map(u=>s.createContext(u));return function(m){const h=(m==null?void 0:m[t])||i;return s.useMemo(()=>({[`__scope${t}`]:{...m,[t]:h}}),[m,h])}};return n.scopeName=t,[o,mr(n,...a)]}function mr(...t){const a=t[0];if(t.length===1)return a;const r=()=>{const o=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const u=o.reduce((m,{useScope:h,scopeName:p})=>{const j=h(i)[`__scope${p}`];return{...m,...j}},{});return s.useMemo(()=>({[`__scope${a.scopeName}`]:u}),[u])}};return r.scopeName=a.scopeName,r}function tt(t){const a=pr(t),r=s.forwardRef((o,n)=>{const{children:i,...u}=o,m=s.Children.toArray(i),h=m.find(xr);if(h){const p=h.props.children,f=m.map(j=>j===h?s.Children.count(p)>1?s.Children.only(null):s.isValidElement(p)?p.props.children:null:j);return e.jsx(a,{...u,ref:n,children:s.isValidElement(p)?s.cloneElement(p,void 0,f):null})}return e.jsx(a,{...u,ref:n,children:i})});return r.displayName=`${t}.Slot`,r}function pr(t){const a=s.forwardRef((r,o)=>{const{children:n,...i}=r;if(s.isValidElement(n)){const u=fr(n),m=hr(i,n.props);return n.type!==s.Fragment&&(m.ref=o?de(o,u):u),s.cloneElement(n,m)}return s.Children.count(n)>1?s.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var gr=Symbol("radix.slottable");function xr(t){return s.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gr}function hr(t,a){const r={...a};for(const o in a){const n=t[o],i=a[o];/^on[A-Z]/.test(o)?n&&i?r[o]=(...m)=>{const h=i(...m);return n(...m),h}:n&&(r[o]=n):o==="style"?r[o]={...n,...i}:o==="className"&&(r[o]=[n,i].filter(Boolean).join(" "))}return{...t,...r}}function fr(t){var o,n;let a=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?t.ref:(a=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var br=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=br.reduce((t,a)=>{const r=tt(`Primitive.${a}`),o=s.forwardRef((n,i)=>{const{asChild:u,...m}=n,h=u?r:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...m,ref:i})});return o.displayName=`Primitive.${a}`,{...t,[a]:o}},{}),ye="Popover",[at]=ur(ye,[Je]),xe=Je(),[vr,Y]=at(ye),st=t=>{const{__scopePopover:a,children:r,open:o,defaultOpen:n,onOpenChange:i,modal:u=!1}=t,m=xe(a),h=s.useRef(null),[p,f]=s.useState(!1),[j,v]=Tt({prop:o,defaultProp:n??!1,onChange:i,caller:ye});return e.jsx(Zt,{...m,children:e.jsx(vr,{scope:a,contentId:ae(),triggerRef:h,open:j,onOpenChange:v,onOpenToggle:s.useCallback(()=>v(S=>!S),[v]),hasCustomAnchor:p,onCustomAnchorAdd:s.useCallback(()=>f(!0),[]),onCustomAnchorRemove:s.useCallback(()=>f(!1),[]),modal:u,children:r})})};st.displayName=ye;var nt="PopoverAnchor",yr=s.forwardRef((t,a)=>{const{__scopePopover:r,...o}=t,n=Y(nt,r),i=xe(r),{onCustomAnchorAdd:u,onCustomAnchorRemove:m}=n;return s.useEffect(()=>(u(),()=>m()),[u,m]),e.jsx(Ye,{...i,...o,ref:a})});yr.displayName=nt;var ot="PopoverTrigger",it=s.forwardRef((t,a)=>{const{__scopePopover:r,...o}=t,n=Y(ot,r),i=xe(r),u=Ze(a,n.triggerRef),m=e.jsx(rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":mt(n.open),...o,ref:u,onClick:ge(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?m:e.jsx(Ye,{asChild:!0,...i,children:m})});it.displayName=ot;var $e="PopoverPortal",[jr,wr]=at($e,{forceMount:void 0}),lt=t=>{const{__scopePopover:a,forceMount:r,children:o,container:n}=t,i=Y($e,a);return e.jsx(jr,{scope:a,forceMount:r,children:e.jsx(Xe,{present:r||i.open,children:e.jsx(Bt,{asChild:!0,container:n,children:o})})})};lt.displayName=$e;var ue="PopoverContent",ct=s.forwardRef((t,a)=>{const r=wr(ue,t.__scopePopover),{forceMount:o=r.forceMount,...n}=t,i=Y(ue,t.__scopePopover);return e.jsx(Xe,{present:o||i.open,children:i.modal?e.jsx(Cr,{...n,ref:a}):e.jsx(Sr,{...n,ref:a})})});ct.displayName=ue;var Nr=tt("PopoverContent.RemoveScroll"),Cr=s.forwardRef((t,a)=>{const r=Y(ue,t.__scopePopover),o=s.useRef(null),n=Ze(a,o),i=s.useRef(!1);return s.useEffect(()=>{const u=o.current;if(u)return zt(u)},[]),e.jsx(qt,{as:Nr,allowPinchZoom:!0,children:e.jsx(dt,{...t,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,u=>{var m;u.preventDefault(),i.current||(m=r.triggerRef.current)==null||m.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,u=>{const m=u.detail.originalEvent,h=m.button===0&&m.ctrlKey===!0,p=m.button===2||h;i.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),Sr=s.forwardRef((t,a)=>{const r=Y(ue,t.__scopePopover),o=s.useRef(!1),n=s.useRef(!1);return e.jsx(dt,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var u,m;(u=t.onCloseAutoFocus)==null||u.call(t,i),i.defaultPrevented||(o.current||(m=r.triggerRef.current)==null||m.focus(),i.preventDefault()),o.current=!1,n.current=!1},onInteractOutside:i=>{var h,p;(h=t.onInteractOutside)==null||h.call(t,i),i.defaultPrevented||(o.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const u=i.target;((p=r.triggerRef.current)==null?void 0:p.contains(u))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),dt=s.forwardRef((t,a)=>{const{__scopePopover:r,trapFocus:o,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:u,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:f,...j}=t,v=Y(ue,r),S=xe(r);return Kt(),e.jsx(Ht,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:n,onUnmountAutoFocus:i,children:e.jsx(Ut,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:f,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>v.onOpenChange(!1),children:e.jsx(Jt,{"data-state":mt(v.open),role:"dialog",id:v.contentId,...S,...j,ref:a,style:{...j.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ut="PopoverClose",_r=s.forwardRef((t,a)=>{const{__scopePopover:r,...o}=t,n=Y(ut,r);return e.jsx(rt.button,{type:"button",...o,ref:a,onClick:ge(t.onClick,()=>n.onOpenChange(!1))})});_r.displayName=ut;var kr="PopoverArrow",Pr=s.forwardRef((t,a)=>{const{__scopePopover:r,...o}=t,n=xe(r);return e.jsx(Yt,{...n,...o,ref:a})});Pr.displayName=kr;function mt(t){return t?"open":"closed"}var Rr=st,Er=it,Ir=lt,pt=ct;const Or=Rr,Vr=Er,gt=s.forwardRef(({className:t,align:a="center",sideOffset:r=4,...o},n)=>e.jsx(Ir,{children:e.jsx(pt,{ref:n,align:a,sideOffset:r,className:Z("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...o})}));gt.displayName=pt.displayName;var Be=1,Ar=.9,Fr=.8,Dr=.17,Ce=.1,Se=.999,$r=.9999,Lr=.99,Mr=/[\\\/_+.#"@\[\(\{&]/,Tr=/[\\\/_+.#"@\[\(\{&]/g,Br=/[\s-]/,xt=/[\s-]/g;function Re(t,a,r,o,n,i,u){if(i===a.length)return n===t.length?Be:Lr;var m=`${n},${i}`;if(u[m]!==void 0)return u[m];for(var h=o.charAt(i),p=r.indexOf(h,n),f=0,j,v,S,N;p>=0;)j=Re(t,a,r,o,p+1,i+1,u),j>f&&(p===n?j*=Be:Mr.test(t.charAt(p-1))?(j*=Fr,S=t.slice(n,p-1).match(Tr),S&&n>0&&(j*=Math.pow(Se,S.length))):Br.test(t.charAt(p-1))?(j*=Ar,N=t.slice(n,p-1).match(xt),N&&n>0&&(j*=Math.pow(Se,N.length))):(j*=Dr,n>0&&(j*=Math.pow(Se,p-n))),t.charAt(p)!==a.charAt(i)&&(j*=$r)),(j<Ce&&r.charAt(p-1)===o.charAt(i+1)||o.charAt(i+1)===o.charAt(i)&&r.charAt(p-1)!==o.charAt(i))&&(v=Re(t,a,r,o,p+1,i+2,u),v*Ce>j&&(j=v*Ce)),j>f&&(f=j),p=r.indexOf(h,p+1);return u[m]=f,f}function ze(t){return t.toLowerCase().replace(xt," ")}function zr(t,a,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Re(t,a,ze(t),ze(a),0,0,{})}var me='[cmdk-group=""]',_e='[cmdk-group-items=""]',qr='[cmdk-group-heading=""]',ht='[cmdk-item=""]',qe=`${ht}:not([aria-disabled="true"])`,Ee="cmdk-item-select",le="data-value",Kr=(t,a,r)=>zr(t,a,r),ft=s.createContext(void 0),he=()=>s.useContext(ft),bt=s.createContext(void 0),Le=()=>s.useContext(bt),vt=s.createContext(void 0),yt=s.forwardRef((t,a)=>{let r=ce(()=>{var l,y;return{search:"",value:(y=(l=t.value)!=null?l:t.defaultValue)!=null?y:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),o=ce(()=>new Set),n=ce(()=>new Map),i=ce(()=>new Map),u=ce(()=>new Set),m=jt(t),{label:h,children:p,value:f,onValueChange:j,filter:v,shouldFilter:S,loop:N,disablePointerSelection:A=!1,vimBindings:k=!0,...B}=t,E=ae(),$=ae(),g=ae(),R=s.useRef(null),b=ta();se(()=>{if(f!==void 0){let l=f.trim();r.current.value=l,P.emit()}},[f]),se(()=>{b(6,U)},[]);let P=s.useMemo(()=>({subscribe:l=>(u.current.add(l),()=>u.current.delete(l)),snapshot:()=>r.current,setState:(l,y,c)=>{var d,w,C,L;if(!Object.is(r.current[l],y)){if(r.current[l]=y,l==="search")W(),T(),b(1,q);else if(l==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let O=document.getElementById(g);O?O.focus():(d=document.getElementById(E))==null||d.focus()}if(b(7,()=>{var O;r.current.selectedItemId=(O=K())==null?void 0:O.id,P.emit()}),c||b(5,U),((w=m.current)==null?void 0:w.value)!==void 0){let O=y??"";(L=(C=m.current).onValueChange)==null||L.call(C,O);return}}P.emit()}},emit:()=>{u.current.forEach(l=>l())}}),[]),Q=s.useMemo(()=>({value:(l,y,c)=>{var d;y!==((d=i.current.get(l))==null?void 0:d.value)&&(i.current.set(l,{value:y,keywords:c}),r.current.filtered.items.set(l,H(y,c)),b(2,()=>{T(),P.emit()}))},item:(l,y)=>(o.current.add(l),y&&(n.current.has(y)?n.current.get(y).add(l):n.current.set(y,new Set([l]))),b(3,()=>{W(),T(),r.current.value||q(),P.emit()}),()=>{i.current.delete(l),o.current.delete(l),r.current.filtered.items.delete(l);let c=K();b(4,()=>{W(),(c==null?void 0:c.getAttribute("id"))===l&&q(),P.emit()})}),group:l=>(n.current.has(l)||n.current.set(l,new Set),()=>{i.current.delete(l),n.current.delete(l)}),filter:()=>m.current.shouldFilter,label:h||t["aria-label"],getDisablePointerSelection:()=>m.current.disablePointerSelection,listId:E,inputId:g,labelId:$,listInnerRef:R}),[]);function H(l,y){var c,d;let w=(d=(c=m.current)==null?void 0:c.filter)!=null?d:Kr;return l?w(l,r.current.search,y):0}function T(){if(!r.current.search||m.current.shouldFilter===!1)return;let l=r.current.filtered.items,y=[];r.current.filtered.groups.forEach(d=>{let w=n.current.get(d),C=0;w.forEach(L=>{let O=l.get(L);C=Math.max(O,C)}),y.push([d,C])});let c=R.current;G().sort((d,w)=>{var C,L;let O=d.getAttribute("id"),F=w.getAttribute("id");return((C=l.get(F))!=null?C:0)-((L=l.get(O))!=null?L:0)}).forEach(d=>{let w=d.closest(_e);w?w.appendChild(d.parentElement===w?d:d.closest(`${_e} > *`)):c.appendChild(d.parentElement===c?d:d.closest(`${_e} > *`))}),y.sort((d,w)=>w[1]-d[1]).forEach(d=>{var w;let C=(w=R.current)==null?void 0:w.querySelector(`${me}[${le}="${encodeURIComponent(d[0])}"]`);C==null||C.parentElement.appendChild(C)})}function q(){let l=G().find(c=>c.getAttribute("aria-disabled")!=="true"),y=l==null?void 0:l.getAttribute(le);P.setState("value",y||void 0)}function W(){var l,y,c,d;if(!r.current.search||m.current.shouldFilter===!1){r.current.filtered.count=o.current.size;return}r.current.filtered.groups=new Set;let w=0;for(let C of o.current){let L=(y=(l=i.current.get(C))==null?void 0:l.value)!=null?y:"",O=(d=(c=i.current.get(C))==null?void 0:c.keywords)!=null?d:[],F=H(L,O);r.current.filtered.items.set(C,F),F>0&&w++}for(let[C,L]of n.current)for(let O of L)if(r.current.filtered.items.get(O)>0){r.current.filtered.groups.add(C);break}r.current.filtered.count=w}function U(){var l,y,c;let d=K();d&&(((l=d.parentElement)==null?void 0:l.firstChild)===d&&((c=(y=d.closest(me))==null?void 0:y.querySelector(qr))==null||c.scrollIntoView({block:"nearest"})),d.scrollIntoView({block:"nearest"}))}function K(){var l;return(l=R.current)==null?void 0:l.querySelector(`${ht}[aria-selected="true"]`)}function G(){var l;return Array.from(((l=R.current)==null?void 0:l.querySelectorAll(qe))||[])}function ee(l){let y=G()[l];y&&P.setState("value",y.getAttribute(le))}function te(l){var y;let c=K(),d=G(),w=d.findIndex(L=>L===c),C=d[w+l];(y=m.current)!=null&&y.loop&&(C=w+l<0?d[d.length-1]:w+l===d.length?d[0]:d[w+l]),C&&P.setState("value",C.getAttribute(le))}function ne(l){let y=K(),c=y==null?void 0:y.closest(me),d;for(;c&&!d;)c=l>0?Yr(c,me):ea(c,me),d=c==null?void 0:c.querySelector(qe);d?P.setState("value",d.getAttribute(le)):te(l)}let oe=()=>ee(G().length-1),re=l=>{l.preventDefault(),l.metaKey?oe():l.altKey?ne(1):te(1)},x=l=>{l.preventDefault(),l.metaKey?ee(0):l.altKey?ne(-1):te(-1)};return s.createElement(J.div,{ref:a,tabIndex:-1,...B,"cmdk-root":"",onKeyDown:l=>{var y;(y=B.onKeyDown)==null||y.call(B,l);let c=l.nativeEvent.isComposing||l.keyCode===229;if(!(l.defaultPrevented||c))switch(l.key){case"n":case"j":{k&&l.ctrlKey&&re(l);break}case"ArrowDown":{re(l);break}case"p":case"k":{k&&l.ctrlKey&&x(l);break}case"ArrowUp":{x(l);break}case"Home":{l.preventDefault(),ee(0);break}case"End":{l.preventDefault(),oe();break}case"Enter":{l.preventDefault();let d=K();if(d){let w=new Event(Ee);d.dispatchEvent(w)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:Q.inputId,id:Q.labelId,style:aa},h),je(t,l=>s.createElement(bt.Provider,{value:P},s.createElement(ft.Provider,{value:Q},l))))}),Hr=s.forwardRef((t,a)=>{var r,o;let n=ae(),i=s.useRef(null),u=s.useContext(vt),m=he(),h=jt(t),p=(o=(r=h.current)==null?void 0:r.forceMount)!=null?o:u==null?void 0:u.forceMount;se(()=>{if(!p)return m.item(n,u==null?void 0:u.id)},[p]);let f=wt(n,i,[t.value,t.children,i],t.keywords),j=Le(),v=X(b=>b.value&&b.value===f.current),S=X(b=>p||m.filter()===!1?!0:b.search?b.filtered.items.get(n)>0:!0);s.useEffect(()=>{let b=i.current;if(!(!b||t.disabled))return b.addEventListener(Ee,N),()=>b.removeEventListener(Ee,N)},[S,t.onSelect,t.disabled]);function N(){var b,P;A(),(P=(b=h.current).onSelect)==null||P.call(b,f.current)}function A(){j.setState("value",f.current,!0)}if(!S)return null;let{disabled:k,value:B,onSelect:E,forceMount:$,keywords:g,...R}=t;return s.createElement(J.div,{ref:de(i,a),...R,id:n,"cmdk-item":"",role:"option","aria-disabled":!!k,"aria-selected":!!v,"data-disabled":!!k,"data-selected":!!v,onPointerMove:k||m.getDisablePointerSelection()?void 0:A,onClick:k?void 0:N},t.children)}),Ur=s.forwardRef((t,a)=>{let{heading:r,children:o,forceMount:n,...i}=t,u=ae(),m=s.useRef(null),h=s.useRef(null),p=ae(),f=he(),j=X(S=>n||f.filter()===!1?!0:S.search?S.filtered.groups.has(u):!0);se(()=>f.group(u),[]),wt(u,m,[t.value,t.heading,h]);let v=s.useMemo(()=>({id:u,forceMount:n}),[n]);return s.createElement(J.div,{ref:de(m,a),...i,"cmdk-group":"",role:"presentation",hidden:j?void 0:!0},r&&s.createElement("div",{ref:h,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),je(t,S=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},s.createElement(vt.Provider,{value:v},S))))}),Gr=s.forwardRef((t,a)=>{let{alwaysRender:r,...o}=t,n=s.useRef(null),i=X(u=>!u.search);return!r&&!i?null:s.createElement(J.div,{ref:de(n,a),...o,"cmdk-separator":"",role:"separator"})}),Wr=s.forwardRef((t,a)=>{let{onValueChange:r,...o}=t,n=t.value!=null,i=Le(),u=X(p=>p.search),m=X(p=>p.selectedItemId),h=he();return s.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),s.createElement(J.input,{ref:a,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":h.listId,"aria-labelledby":h.labelId,"aria-activedescendant":m,id:h.inputId,type:"text",value:n?t.value:u,onChange:p=>{n||i.setState("search",p.target.value),r==null||r(p.target.value)}})}),Qr=s.forwardRef((t,a)=>{let{children:r,label:o="Suggestions",...n}=t,i=s.useRef(null),u=s.useRef(null),m=X(p=>p.selectedItemId),h=he();return s.useEffect(()=>{if(u.current&&i.current){let p=u.current,f=i.current,j,v=new ResizeObserver(()=>{j=requestAnimationFrame(()=>{let S=p.offsetHeight;f.style.setProperty("--cmdk-list-height",S.toFixed(1)+"px")})});return v.observe(p),()=>{cancelAnimationFrame(j),v.unobserve(p)}}},[]),s.createElement(J.div,{ref:de(i,a),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":m,"aria-label":o,id:h.listId},je(t,p=>s.createElement("div",{ref:de(u,h.listInnerRef),"cmdk-list-sizer":""},p)))}),Xr=s.forwardRef((t,a)=>{let{open:r,onOpenChange:o,overlayClassName:n,contentClassName:i,container:u,...m}=t;return s.createElement(Gt,{open:r,onOpenChange:o},s.createElement(Wt,{container:u},s.createElement(Qt,{"cmdk-overlay":"",className:n}),s.createElement(Xt,{"aria-label":t.label,"cmdk-dialog":"",className:i},s.createElement(yt,{ref:a,...m}))))}),Zr=s.forwardRef((t,a)=>X(r=>r.filtered.count===0)?s.createElement(J.div,{ref:a,...t,"cmdk-empty":"",role:"presentation"}):null),Jr=s.forwardRef((t,a)=>{let{progress:r,children:o,label:n="Loading...",...i}=t;return s.createElement(J.div,{ref:a,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},je(t,u=>s.createElement("div",{"aria-hidden":!0},u)))}),z=Object.assign(yt,{List:Qr,Item:Hr,Input:Wr,Group:Ur,Separator:Gr,Dialog:Xr,Empty:Zr,Loading:Jr});function Yr(t,a){let r=t.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function ea(t,a){let r=t.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function jt(t){let a=s.useRef(t);return se(()=>{a.current=t}),a}var se=typeof window>"u"?s.useEffect:s.useLayoutEffect;function ce(t){let a=s.useRef();return a.current===void 0&&(a.current=t()),a}function X(t){let a=Le(),r=()=>t(a.snapshot());return s.useSyncExternalStore(a.subscribe,r,r)}function wt(t,a,r,o=[]){let n=s.useRef(),i=he();return se(()=>{var u;let m=(()=>{var p;for(let f of r){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(p=f.current.textContent)==null?void 0:p.trim():n.current}})(),h=o.map(p=>p.trim());i.value(t,m,h),(u=a.current)==null||u.setAttribute(le,m),n.current=m}),n}var ta=()=>{let[t,a]=s.useState(),r=ce(()=>new Map);return se(()=>{r.current.forEach(o=>o()),r.current=new Map},[t]),(o,n)=>{r.current.set(o,n),a({})}};function ra(t){let a=t.type;return typeof a=="function"?a(t.props):"render"in a?a.render(t.props):t}function je({asChild:t,children:a},r){return t&&s.isValidElement(a)?s.cloneElement(ra(a),{ref:a.ref},r(a.props.children)):r(a)}var aa={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Nt=s.forwardRef(({className:t,...a},r)=>e.jsx(z,{ref:r,className:Z("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...a}));Nt.displayName=z.displayName;const Ct=s.forwardRef(({className:t,...a},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(et,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(z.Input,{ref:r,className:Z("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...a})]}));Ct.displayName=z.Input.displayName;const St=s.forwardRef(({className:t,...a},r)=>e.jsx(z.List,{ref:r,className:Z("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a}));St.displayName=z.List.displayName;const _t=s.forwardRef((t,a)=>e.jsx(z.Empty,{ref:a,className:"py-6 text-center text-sm",...t}));_t.displayName=z.Empty.displayName;const kt=s.forwardRef(({className:t,...a},r)=>e.jsx(z.Group,{ref:r,className:Z("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a}));kt.displayName=z.Group.displayName;const sa=s.forwardRef(({className:t,...a},r)=>e.jsx(z.Separator,{ref:r,className:Z("-mx-1 h-px bg-border",t),...a}));sa.displayName=z.Separator.displayName;const Pt=s.forwardRef(({className:t,...a},r)=>e.jsx(z.Item,{ref:r,className:Z("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...a}));Pt.displayName=z.Item.displayName;function Ke({name:t,label:a,type:r,value:o,onChange:n,endPoint:i,previewUpadte:u,radio_value:m,selectOptions:h=[],disabled:p=!1,required:f=!1}){const[j,v]=s.useState([]),[S,N]=s.useState(null),A=j.find(g=>String(g.id)===String(o)),[k,B]=s.useState(!1);s.useEffect(()=>{r==="selector"&&i&&(async()=>{try{const b=await(await fetch(`/api/${i}`)).json();v(b.data)}catch(R){console.error("Error fetching selector data:",R)}})()},[r,i]),s.useEffect(()=>{r==="selector"&&h.length>0&&v(h)},[r,h]),s.useEffect(()=>{r==="file"&&o===null&&N(null)},[r,o]);const E=g=>{var b;const R=(b=g.target.files)==null?void 0:b[0];R&&N(URL.createObjectURL(R)),n(g)},$=()=>e.jsxs(D,{htmlFor:t,className:"flex items-center gap-1",children:[a,f&&e.jsx("span",{className:"w-2 h-2 text-red-500 text-[15px]",children:"*"})]});return r==="radio"&&Array.isArray(m)?e.jsxs("div",{className:"space-y-2",children:[$(),e.jsx("div",{className:"flex flex-row gap-4 ",children:m.map(g=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[e.jsx("input",{type:"radio",name:t,value:g.value,checked:String(o)===String(g.value),onChange:n,className:"accent-primary"}),e.jsx("span",{children:g.name})]},g.value))})]}):r==="checkbox"?e.jsxs("div",{className:"space-y-2",children:[$(),e.jsx("input",{type:"checkbox",id:t,name:t,checked:!!o,onChange:n,className:"accent-primary"})]}):r==="file"?e.jsxs("div",{className:"space-y-2",children:[$(),e.jsxs("label",{htmlFor:`file-input-${t}`,className:"flex items-center justify-center gap-2 p-4 border border-dashed border-gray-300 rounded-md cursor-pointer text-sm",children:[e.jsx(er,{className:"w-5 h-5"}),e.jsx("span",{children:"Choose File"})]}),e.jsx("input",{id:`file-input-${t}`,type:"file",name:t,onChange:E,className:"hidden"}),u&&typeof u=="string"&&e.jsx("img",{src:`undefined/${u}`,alt:"Uploaded Preview",className:"max-w-full max-h-[200px] mt-2 border rounded"}),S&&e.jsxs("div",{className:"mt-2 flex flex-col items-center",children:[e.jsx("img",{src:S,alt:"Live Preview",className:"max-w-full max-h-[200px] border rounded"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Preview"})]})]}):r==="switch"?e.jsxs("div",{className:"space-y-2",children:[$(),e.jsxs(Ue,{onValueChange:g=>n({target:{name:t,value:g}}),value:(o==null?void 0:o.toString())??"",children:[e.jsx(Ge,{className:"w-full",children:e.jsx(We,{placeholder:`Select ${a}`})}),e.jsxs(Qe,{children:[e.jsx(ke,{value:"true",children:"True"}),e.jsx(ke,{value:"false",children:"False"})]})]})]}):r==="selector"?e.jsxs("div",{className:"space-y-2",children:[$(),e.jsxs(Or,{open:k,onOpenChange:B,children:[e.jsx(Vr,{asChild:!0,children:e.jsxs(V,{variant:"outline",role:"combobox",className:"w-full justify-between h-12 bg-white hover:bg-gray-50","aria-expanded":k,disabled:p,children:[A?A.name:`Select ${a}`,e.jsx(rr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(gt,{className:"w-full p-0 bg-white",children:e.jsxs(Nt,{className:"bg-white",children:[e.jsx(Ct,{placeholder:`Search ${a}...`,className:"h-9"}),e.jsxs(St,{className:"bg-white",children:[e.jsx(_t,{children:"No option found."}),e.jsx(kt,{className:"bg-white",children:j.map(g=>e.jsxs(Pt,{value:g.name,className:"hover:bg-gray-100",onSelect:()=>{n({target:{name:t,value:String(g.id)}}),B(!1)},children:[g.name,e.jsx(ie,{className:Z("ml-auto h-4 w-4",String(g.id)===String(o)?"opacity-100":"opacity-0")})]},g.id))})]})]})})]})]}):e.jsxs("div",{className:"space-y-2",children:[$(),r==="textarea"?e.jsx("textarea",{name:t,value:typeof o=="string"?o:"",onChange:g=>{n({...g,target:{...g.target,name:t,value:g.target.value}})},rows:20,className:"w-full min-h-[120px] max-h-[300px] resize-y rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 bg-white px-4 py-3 text-sm shadow-sm transition placeholder:text-gray-400",placeholder:`Enter ${a}`}):e.jsx(M,{type:r,name:t,value:typeof o=="string"||typeof o=="number"?o:"",onChange:n,className:"w-full h-12 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 bg-white px-4 py-2 text-sm shadow-sm transition placeholder:text-gray-400",placeholder:`Enter ${a}`})]})}const na=({isOpen:t,onClose:a,product:r,onSuccess:o,setIsVariationModalOpen:n,setIsBrandModalOpen:i,groupedVariations:u=[],brands:m=[],categories:h=[],isNew:p=!0})=>{var re,x,l,y;const[f,j]=s.useState("no"),[v,S]=s.useState([]),[N,A]=s.useState(0),[k,B]=s.useState(!1),[E,$]=s.useState({name:"",description:"",brand_id:0,category_id:0,primary_image:[]}),[g,R]=s.useState({quantity:0,web_price:0,web_discount:0,discount_type:"currency",images:[]}),[b,P]=s.useState({selectedVariations:[],quantity:0,web_price:0,web_discount:0,discount_type:"currency",images:[]}),[Q,H]=s.useState(null),[T,q]=s.useState(null),[W,U]=s.useState(null);s.useEffect(()=>{var c,d;r&&t&&(j("no"),B(!1),$({name:r.name||"",description:r.description||"",brand_id:((c=r.brand)==null?void 0:c.id)||0,category_id:((d=r.category)==null?void 0:d.id)||0,primary_image:[]}),R({quantity:0,web_price:r.web_price||0,web_discount:0,discount_type:"currency",images:[]}),S([]),P({selectedVariations:[],quantity:0,web_price:r.web_price||0,web_discount:0,discount_type:"currency",images:[]}),H(null),q(null),U(null))},[r,t]);const K=(c,d,w)=>w==="percentage"?c*d/100:d,G=async()=>{var w,C,L;if(!r)return;const c=localStorage.getItem("user"),d=(c?(w=JSON.parse(c))==null?void 0:w.id:null)||1;try{let O;if(p){const F=new FormData;if(F.append("name",E.name),F.append("description",E.description),F.append("category_id",E.category_id.toString()),F.append("brand_id",E.brand_id.toString()),F.append("user_id",d.toString()),E.primary_image.length>0)F.append("primary_image",E.primary_image[0]);else{_.error("Please upload a primary product image");return}_.loading("Creating product...");const I=await we.post("/products",F,{headers:{"Content-Type":"multipart/form-data"}});if(I.data.status!=="success"){_.dismiss(),_.error("Failed to create product");return}O=I.data.data.id}else O=r.id;if(_.dismiss(),_.loading("Adding stock..."),f==="no"){if(g.quantity<=0){_.dismiss(),_.error("Please enter a valid quantity");return}const F=K(g.web_price,g.web_discount,g.discount_type),I=new FormData;I.append("product_id",O.toString()),I.append("quantity",g.quantity.toString()),I.append("web_price",g.web_price.toString()),I.append("pos_price","0"),I.append("web_discount",F.toString()),I.append("pos_discount","0"),I.append("variations[]","1"),I.append("user_id",d.toString()),g.images.length>0&&I.append("variation_images[]",g.images[0]),await we.post("/stocks",I,{headers:{"Content-Type":"multipart/form-data"}}),_.dismiss(),_.success("Product and stock added successfully"),o(),a()}else{if(v.length===0){_.dismiss(),_.error("Please add at least one variation stock");return}for(const F of v){const I=new FormData;I.append("product_id",O.toString()),I.append("quantity",F.quantity.toString()),I.append("web_price",F.web_price.toString()),I.append("pos_price","0"),I.append("web_discount",F.web_discount.toString()),I.append("pos_discount","0"),I.append("user_id",d.toString()),F.selectedVariations.forEach(Rt=>{I.append("variations[]",Rt.toString())}),F.images.length>0&&I.append("variation_images[]",F.images[0]),await we.post("/stocks",I,{headers:{"Content-Type":"multipart/form-data"}})}_.dismiss(),_.success(`Product created with ${v.length} stock variant(s)`),o(),a()}}catch(O){_.dismiss(),console.error("Error adding product/stock:",O),_.error(((L=(C=O.response)==null?void 0:C.data)==null?void 0:L.message)||"Failed to add product/stock")}},ee=()=>{if(b.selectedVariations.length===0){_.error("Please select at least one variation option");return}if(b.quantity<=0){_.error("Please enter a valid quantity");return}if(v.some(C=>C.selectedVariations.length===b.selectedVariations.length&&C.selectedVariations.every(L=>b.selectedVariations.includes(L)))){_.error("This variation combination already exists");return}const d=K(b.web_price,b.web_discount,b.discount_type),w={id:Date.now().toString(),...b,web_discount:d};S([...v,w]),P({selectedVariations:[],quantity:0,web_price:(r==null?void 0:r.web_price)||0,web_discount:0,discount_type:"currency",images:[]}),U(null),A(C=>C+1),_.success("Variation stock added to list")},te=c=>{S(v.filter(d=>d.id!==c)),_.info("Variation stock removed")},ne=c=>{P(d=>d.selectedVariations.includes(c)?{...d,selectedVariations:d.selectedVariations.filter(C=>C!==c)}:{...d,selectedVariations:[...d.selectedVariations,c]})},oe=c=>{const d=[];return u.forEach(w=>{w.options.forEach(C=>{c.includes(C.id)&&d.push(C.name)})}),d.join(" + ")};return e.jsx(Ie,{open:t,onOpenChange:a,children:e.jsxs(Oe,{className:"sm:max-w-[1000px] max-h-[95vh] flex flex-col p-0 gap-0 rounded-2xl bg-white",children:[e.jsx(Ve,{className:"p-6 pb-4 border-b bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50 shrink-0",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs(Ae,{className:"text-2xl flex items-center gap-2",children:[e.jsx(ve,{className:"h-6 w-6 text-green-600"}),"Add Stock to Inventory"]}),e.jsxs(He,{className:"text-gray-600 mt-1",children:["Configure product details and inventory for ",e.jsx("span",{className:"font-semibold text-gray-900",children:r==null?void 0:r.name})]})]})})}),e.jsxs("div",{className:"p-6 space-y-6 bg-white overflow-y-auto flex-1",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/50 backdrop-blur-sm border-b border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(or,{className:"h-5 w-5 text-blue-600"}),"Product Details"]}),p&&e.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>B(!k),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-100 h-8",children:[e.jsx(lr,{className:"h-3.5 w-3.5 mr-1.5"}),k?"View Mode":"Edit Product"]})]}),e.jsx("div",{className:"p-5 space-y-4",children:k?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(D,{className:"text-xs font-semibold text-gray-700",children:"Product Name"}),e.jsx(M,{placeholder:"Enter product name",className:"h-11 bg-white border-blue-200 focus:border-blue-500 focus:ring-blue-500",value:E.name,onChange:c=>$({...E,name:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-xs font-semibold text-gray-700",children:"Brand"}),e.jsxs(V,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(!0),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-100 h-7 text-xs font-semibold -mt-1",children:[e.jsx(pe,{className:"h-3.5 w-3.5 mr-1"}),"Add Brand"]})]}),e.jsx("div",{className:"[&_button]:h-11 [&_button]:bg-white [&_button]:border-blue-200 [&_button]:hover:bg-blue-50",children:e.jsx(Ke,{name:"brand_id",label:"",type:"selector",value:((l=E.brand_id)==null?void 0:l.toString())||"",onChange:c=>$({...E,brand_id:parseInt(c.target.value)}),selectOptions:m})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"text-xs font-semibold text-gray-700",children:"Category"}),e.jsx("div",{className:"[&_button]:h-11 [&_button]:bg-white [&_button]:border-blue-200 [&_button]:hover:bg-blue-50",children:e.jsx(Ke,{name:"category_id",label:"",type:"selector",value:((y=E.category_id)==null?void 0:y.toString())||"",onChange:c=>$({...E,category_id:parseInt(c.target.value)}),selectOptions:h})})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(D,{className:"text-xs font-semibold text-gray-700",children:"Description (Optional)"}),e.jsx(Mt,{placeholder:"Enter product description...",className:"min-h-[80px] bg-white border-blue-200 focus:border-blue-500 focus:ring-blue-500",value:E.description,onChange:c=>$({...E,description:c.target.value})})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(D,{className:"text-xs font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-blue-600"}),"Primary Product Image (Optional)"]}),e.jsxs("div",{className:"bg-white rounded-lg border border-blue-200 p-3 space-y-3",children:[e.jsx(M,{type:"file",accept:"image/*",onChange:c=>{var w;const d=(w=c.target.files)==null?void 0:w[0];d&&($({...E,primary_image:[d]}),H(URL.createObjectURL(d)))},className:"cursor-pointer file:cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Q&&e.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:Q,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(V,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 bg-white/80 hover:bg-white rounded-full",onClick:()=>{$({...E,primary_image:[]}),H(null)},children:e.jsx(be,{className:"h-4 w-4 text-gray-500"})})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100 shadow-sm",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Product Name"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:r==null?void 0:r.name})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100 shadow-sm",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Brand"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:((re=r==null?void 0:r.brand)==null?void 0:re.name)||"No Brand"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100 shadow-sm",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Category"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:((x=r==null?void 0:r.category)==null?void 0:x.name)||"Uncategorized"})]}),(r==null?void 0:r.description)&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100 shadow-sm md:col-span-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:r.description})]})]})})]}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),e.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx(D,{className:"text-sm font-semibold text-gray-900",children:"Does this product have variations?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(V,{type:"button",variant:f==="no"?"default":"outline",className:`flex-1 h-11 ${f==="no"?"bg-green-600 hover:bg-green-700":"hover:bg-gray-50"}`,onClick:()=>{j("no"),S([])},children:[f==="no"&&e.jsx(ie,{className:"h-4 w-4 mr-2"}),"No variations"]}),e.jsxs(V,{type:"button",variant:f==="yes"?"default":"outline",className:`flex-1 h-11 ${f==="yes"?"bg-green-600 hover:bg-green-700":"hover:bg-gray-50"}`,onClick:()=>{j("yes"),S([])},children:[f==="yes"&&e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Has variations"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-start gap-1.5",children:[e.jsx(tr,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),'Select "Has variations" if your product comes in different colors, sizes, or other options']})]}),f==="no"?e.jsxs("div",{className:"space-y-5 bg-gradient-to-br from-gray-50 to-slate-50 p-5 rounded-xl border border-gray-200",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-green-600"}),"Stock Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(M,{type:"number",min:"0",placeholder:"100",className:"h-11 bg-white border-gray-300 focus:border-green-500 focus:ring-green-500 font-medium",value:g.quantity||"",onChange:c=>R({...g,quantity:parseInt(c.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-semibold"}),e.jsx(M,{type:"number",min:"0",step:"0.01",placeholder:"99.99",className:"pl-8 h-11 bg-white border-gray-300 focus:border-green-500 focus:ring-green-500 font-medium",value:g.web_price||"",onChange:c=>R({...g,web_price:parseFloat(c.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"text-xs font-semibold text-gray-700",children:"Discount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{type:"number",min:"0",max:g.discount_type==="percentage"?100:g.web_price,placeholder:g.discount_type==="percentage"?"10":"50.00",className:"pr-8 h-11 bg-white border-gray-300 focus:border-green-500 focus:ring-green-500 font-medium",value:g.web_discount||"",onChange:c=>R({...g,web_discount:parseFloat(c.target.value)||0})}),g.discount_type==="percentage"&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"%"})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 h-11 border border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>R({...g,discount_type:"percentage",web_discount:0}),className:`px-3 rounded-md text-sm font-medium transition-all ${g.discount_type==="percentage"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>R({...g,discount_type:"currency",web_discount:0}),className:`px-3 rounded-md text-sm font-medium transition-all ${g.discount_type==="currency"?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.jsx("span",{className:"text-xs font-bold",children:"LKR"})})]})]})]})]}),g.web_discount>0&&g.web_price>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-300 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-green-700 uppercase tracking-wider",children:"Final Price After Discount"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:g.discount_type==="percentage"?`LKR ${(g.web_price*(1-g.web_discount/100)).toFixed(2)}`:`LKR ${(g.web_price-g.web_discount).toFixed(2)}`})]}),e.jsx("div",{className:"bg-green-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:g.discount_type==="percentage"?`${g.web_discount}% OFF`:`LKR ${g.web_discount} OFF`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-xs font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-gray-600"}),"Product Image (Optional)"]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-300 p-3 space-y-3",children:[e.jsx(M,{type:"file",accept:"image/*",onChange:c=>{var w;const d=(w=c.target.files)==null?void 0:w[0];d&&(R({...g,images:[d]}),q(URL.createObjectURL(d)))},className:"cursor-pointer file:cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),T&&e.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:T,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(V,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 bg-white/80 hover:bg-white rounded-full",onClick:()=>{R({...g,images:[]}),q(null)},children:e.jsx(be,{className:"h-4 w-4 text-gray-500"})})]})]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-4 bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-green-600"}),"Select Variation Options"]}),e.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"text-green-600 hover:text-green-700 hover:bg-green-50 h-7 text-xs",children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),"Create New"]})]}),u.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:u.map(c=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2 uppercase tracking-wider",children:c.variation_name}),e.jsx("div",{className:"space-y-1.5 max-h-[120px] overflow-y-auto",children:c.options.map(d=>e.jsxs("label",{className:`flex items-center space-x-2 p-2 rounded-md transition-all cursor-pointer ${b.selectedVariations.includes(d.id)?"bg-green-100 border border-green-300":"bg-white hover:bg-gray-100 border border-transparent"}`,children:[e.jsx(Lt,{id:`var-${d.id}`,checked:b.selectedVariations.includes(d.id),onCheckedChange:()=>ne(d.id),className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:d.name})]},d.id))})]},c.variation_id))}):e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[e.jsx(Pe,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No variation options available"}),e.jsxs(V,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"text-green-600 border-green-600 hover:bg-green-50",children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),"Create variation"]})]})]}),e.jsxs("div",{className:"space-y-4 bg-gradient-to-br from-gray-50 to-slate-50 p-5 rounded-xl border border-gray-200",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-green-600"}),"Stock Configuration for Selected Variations"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(M,{type:"number",min:"0",placeholder:"50",className:"h-11 bg-white border-gray-300 focus:border-green-500 focus:ring-green-500 font-medium",value:b.quantity||"",onChange:c=>P({...b,quantity:parseInt(c.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-semibold"}),e.jsx(M,{type:"number",min:"0",step:"0.01",placeholder:"99.99",className:"pl-8 h-11 bg-white border-gray-300 focus:border-green-500 focus:ring-green-500 font-medium",value:b.web_price||"",onChange:c=>P({...b,web_price:parseFloat(c.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"text-xs font-semibold text-gray-700",children:"Discount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{type:"number",min:"0",max:b.discount_type==="percentage"?100:b.web_price,placeholder:b.discount_type==="percentage"?"10":"50.00",className:"pr-8 h-11 bg-white border-gray-300 focus:border-green-500 focus:ring-green-500 font-medium",value:b.web_discount||"",onChange:c=>P({...b,web_discount:parseFloat(c.target.value)||0})}),b.discount_type==="percentage"&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"%"})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 h-11 border border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>P({...b,discount_type:"percentage",web_discount:0}),className:`px-3 rounded-md text-sm font-medium transition-all ${b.discount_type==="percentage"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>P({...b,discount_type:"currency",web_discount:0}),className:`px-3 rounded-md text-sm font-medium transition-all ${b.discount_type==="currency"?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.jsx("span",{className:"text-xs font-bold",children:"LKR"})})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-xs font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-gray-600"}),"Variation Image (Optional)"]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-300 p-3 space-y-3",children:[e.jsx(M,{type:"file",accept:"image/*",onChange:c=>{var w;const d=(w=c.target.files)==null?void 0:w[0];d&&(P({...b,images:[d]}),U(URL.createObjectURL(d)))},className:"cursor-pointer file:cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"},N),W&&e.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:W,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(V,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 bg-white/80 hover:bg-white rounded-full",onClick:()=>{P({...b,images:[]}),U(null)},children:e.jsx(be,{className:"h-4 w-4 text-gray-500"})})]})]})]}),e.jsxs(V,{onClick:ee,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white h-12 text-base font-semibold shadow-lg shadow-green-200",disabled:b.selectedVariations.length===0,children:[e.jsx(pe,{className:"h-5 w-5 mr-2"}),"Add This Variation to List"]})]}),v.length>0&&e.jsxs("div",{className:"space-y-4 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-5 rounded-xl border-2 border-green-300 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5 text-green-600"}),"Added Variations (",v.length,")"]}),e.jsxs("div",{className:"bg-green-600 text-white px-3 py-1 rounded-full text-xs font-bold",children:[v.length," Stock",v.length!==1?"s":""," Ready"]})]}),e.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto pr-2",children:v.map(c=>e.jsx("div",{className:"bg-white rounded-xl p-4 border-2 border-green-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[c.images.length>0&&e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden border-2 border-gray-200 shadow-sm",children:e.jsx("img",{src:URL.createObjectURL(c.images[0]),alt:"Variation",className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-base text-gray-900 truncate mb-2",children:oe(c.selectedVariations)}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 px-3 py-1 rounded-full text-xs font-semibold border border-blue-200",children:["Qty: ",c.quantity]}),e.jsxs("span",{className:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 px-3 py-1 rounded-full text-xs font-semibold border border-green-200",children:["LKR ",c.web_price]}),c.web_discount>0&&e.jsxs("span",{className:"bg-gradient-to-r from-orange-100 to-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-semibold border border-red-200",children:["LKR ",c.web_discount," OFF"]}),c.images.length>0&&e.jsxs("span",{className:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 px-3 py-1 rounded-full text-xs font-semibold border border-purple-200 flex items-center gap-1",children:[e.jsx(fe,{className:"h-3 w-3"}),"1 Image"]})]})]}),e.jsx(V,{variant:"ghost",size:"sm",onClick:()=>te(c.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-9 w-9 p-0 shrink-0 rounded-lg border border-red-200",children:e.jsx(ar,{className:"h-4 w-4"})})]})},c.id))})]})]})]}),e.jsxs(Fe,{className:"p-6 pt-4 border-t bg-gradient-to-r from-gray-50 via-slate-50 to-gray-50 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:f==="yes"&&v.length>0&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:v.length})," variation stock",v.length!==1?"s":""," ready to submit"]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(V,{variant:"outline",onClick:a,className:"h-11 px-8 font-semibold border-2",children:"Cancel"}),e.jsxs(V,{onClick:G,className:"bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 hover:from-green-700 hover:via-emerald-700 hover:to-teal-700 text-white h-11 px-10 shadow-lg shadow-green-300 font-bold text-base",disabled:f==="yes"&&v.length===0,children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),f==="yes"?`Submit ${v.length} Stock${v.length!==1?"s":""}`:"Add Stock to Inventory"]})]})]})]})})},oa=({isOpen:t,onClose:a,variations:r,onSuccess:o})=>{const[n,i]=s.useState({variation_id:"",name:""}),[u,m]=s.useState(!1),[h,p]=s.useState(!1),[f,j]=s.useState(""),v=async()=>{var N,A;if(!f.trim()){_.error("Please enter variation type name");return}m(!0);try{const k=await Me.post("/api/variations",{name:f});k.data.status==="success"?(_.success("Variation type created successfully"),o(),j(""),p(!1)):_.error(k.data.message||"Failed to create variation type")}catch(k){console.error("Error creating variation type:",k),_.error(((A=(N=k.response)==null?void 0:N.data)==null?void 0:A.message)||"Failed to create variation type")}finally{m(!1)}},S=async()=>{var N,A;if(!n.variation_id||!n.name){_.error("Please fill in all fields");return}m(!0);try{const k=await Me.post("/api/variation-options",{variation_id:parseInt(n.variation_id),name:n.name});k.data.status==="success"?(_.success("Variation option created successfully"),o(),a(),i({variation_id:"",name:""})):_.error(k.data.message||"Failed to create variation")}catch(k){console.error("Error creating variation:",k),_.error(((A=(N=k.response)==null?void 0:N.data)==null?void 0:A.message)||"Failed to create variation")}finally{m(!1)}};return e.jsx(Ie,{open:t,onOpenChange:a,children:e.jsxs(Oe,{className:"sm:max-w-[450px] max-h-[90vh] flex flex-col p-0 gap-0 rounded-2xl bg-white",children:[e.jsx(Ve,{className:"p-6 pb-4 border-b bg-gray-50/50 shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Pe,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx(Ae,{className:"text-xl",children:"New Variation Option"}),e.jsx(He,{className:"text-gray-500 mt-1",children:"Add a new option to an existing variation type."})]})]})}),e.jsxs("div",{className:"p-6 space-y-6 bg-white overflow-y-auto flex-1",children:[e.jsxs("div",{className:"space-y-4",children:[h?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New Variation Type"}),e.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>{p(!1),j("")},className:"h-7 px-2 text-xs",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),e.jsx(M,{placeholder:"e.g. Color, Size, Material",className:"h-11 bg-white border-gray-200 focus:border-green-500 transition-all",value:f,onChange:N=>j(N.target.value),onKeyDown:N=>N.key==="Enter"&&v()}),e.jsx(V,{onClick:v,disabled:u,className:"w-full bg-green-600 hover:bg-green-700 h-10",children:u?"Creating...":"Create Variation Type"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variation Type"}),e.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>p(!0),className:"h-7 px-2 text-xs text-green-600 hover:text-green-700 hover:bg-green-50",children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),"New Type"]})]}),e.jsxs(Ue,{value:n.variation_id,onValueChange:N=>i({...n,variation_id:N}),children:[e.jsx(Ge,{className:"h-11 bg-white border-gray-200 focus:border-green-500 transition-all",children:e.jsx(We,{placeholder:"Select type (e.g. Color, Size)"})}),e.jsx(Qe,{className:"bg-white",children:r.map(N=>e.jsx(ke,{value:N.id.toString(),children:N.name},N.id))})]})]}),!h&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Option Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(dr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(M,{placeholder:"e.g. Red, XL, Cotton",className:"pl-9 h-11 bg-white border-gray-200 focus:border-green-500 transition-all",value:n.name,onChange:N=>i({...n,name:N.target.value}),onKeyDown:N=>N.key==="Enter"&&S()})]})]})]}),e.jsxs("div",{className:"bg-blue-50/50 border border-blue-100 rounded-lg p-3 text-sm text-blue-700 flex gap-2",children:[e.jsx("div",{className:"shrink-0 mt-0.5",children:e.jsx("div",{className:"h-4 w-4 rounded-full bg-blue-200 flex items-center justify-center text-[10px] font-bold text-blue-700",children:"i"})}),e.jsx("p",{children:"Creating a new option will make it available for all products using this variation type."})]})]}),e.jsxs(Fe,{className:"p-6 pt-4 border-t bg-gray-50/50",children:[e.jsx(V,{variant:"outline",onClick:a,className:"h-11 px-6",children:"Close"}),!h&&e.jsx(V,{onClick:S,disabled:u,className:"bg-green-600 hover:bg-green-700 h-11 px-6 shadow-sm shadow-green-200",children:u?"Creating...":"Create Option"})]})]})})},Da=()=>{const[t,a]=s.useState([]),[r,o]=s.useState(!0),[n,i]=s.useState(!1),[u,m]=s.useState(!1),[h,p]=s.useState(""),[f,j]=s.useState(null),[v,S]=s.useState([]),[N,A]=s.useState([]),[k,B]=s.useState([]),[E,$]=s.useState([]),[g,R]=s.useState(!1),[b,P]=s.useState(!1),[Q,H]=s.useState(!1),[T,q]=s.useState({name:"",slug:"",image:null});s.useEffect(()=>{W(),U(),K(),G(),ee()},[]);const W=async()=>{i(!0),o(!0);try{const x=await Ot(h);x.status==="success"&&a(x.data)}catch(x){console.error("Error fetching products:",x),_.error("Failed to load products")}finally{o(!1),i(!1)}},U=async()=>{try{const x=await Vt(!0);x.status==="success"&&S(x.data)}catch(x){console.error("Error fetching variations:",x)}},K=async()=>{try{const x=await At();x.status==="success"&&A(x.data)}catch(x){console.error("Error fetching parent variations:",x)}},G=async()=>{try{const x=await Ft();x.status==="success"&&B(x.data)}catch(x){console.error("Error fetching brands:",x)}},ee=async()=>{try{const x=await Dt();x.status==="success"&&$(x.data)}catch(x){console.error("Error fetching categories:",x)}},te=x=>{if(!x.stocks||x.stocks.length===0)return"LKR 0.00";const l=x.stocks.map(d=>{const w=parseFloat(d.web_price),C=parseFloat(d.web_discount);return w-C}),y=Math.min(...l),c=Math.max(...l);return y===c?`LKR ${y.toFixed(2)}`:`LKR ${y.toFixed(2)} - LKR ${c.toFixed(2)}`},ne=x=>{x.preventDefault(),W()},oe=x=>{j(x),R(!0)},re=async()=>{m(!0);try{const x=new FormData;x.append("name",T.name),x.append("slug",T.slug),T.image&&x.append("image",T.image),(await $t(x)).status==="success"&&(_.success("Brand created successfully"),G(),H(!1),q({name:"",slug:"",image:null}))}catch{_.error("Failed to create brand")}finally{m(!1)}};return e.jsxs(It,{children:[e.jsx(Et,{title:"Add Existing Product"}),e.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Product Catalog"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Browse the global catalog and add products to your inventory."})]})}),e.jsxs("form",{onSubmit:ne,className:"relative max-w-2xl",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(et,{className:"h-5 w-5 text-gray-400"})}),e.jsx(M,{placeholder:"Search by product name, brand, or category...",className:"pl-11 h-12 text-lg bg-white shadow-sm border-gray-200 focus:border-green-500 focus:ring-green-500 rounded-xl",value:h,onChange:x=>p(x.target.value)}),e.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center",children:e.jsxs(V,{type:"submit",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white rounded-lg px-4",disabled:n,children:[n&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Search"]})})]}),r?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(Ne,{className:"h-10 w-10 animate-spin text-green-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading products..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(x=>{var l,y;return e.jsxs("div",{className:"group bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gray-50 relative overflow-hidden",children:[e.jsx("img",{src:`/${x.primary_image}`,alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:c=>{c.target.src="https://placehold.co/400?text=No+Image"}}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-white/90 text-gray-700 backdrop-blur-sm shadow-sm",children:((l=x.category)==null?void 0:l.name)||"Uncategorized"})})]}),e.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 line-clamp-1 text-lg group-hover:text-green-600 transition-colors",children:x.name}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:(y=x.brand)==null?void 0:y.name})]}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Price Range:"}),e.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:te(x)})]}),e.jsxs(V,{size:"sm",className:"bg-gray-900 text-white hover:bg-green-600 transition-colors rounded-lg",onClick:()=>oe(x),children:["Select",e.jsx(sr,{className:"ml-1.5 h-3.5 w-3.5"})]})]})]})]},x.id)})}),!r&&t.length===0&&e.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[e.jsx(ve,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No products found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Try adjusting your search terms or check back later."})]})]}),e.jsx(na,{isOpen:g,onClose:()=>R(!1),product:f,onSuccess:()=>{U()},setIsVariationModalOpen:P,setIsBrandModalOpen:H,groupedVariations:v,brands:k,categories:E,isNew:!1}),e.jsx(oa,{isOpen:b,onClose:()=>P(!1),variations:N,onSuccess:()=>{U(),K()}}),e.jsx(Ie,{open:Q,onOpenChange:H,children:e.jsxs(Oe,{className:"bg-white",children:[e.jsx(Ve,{children:e.jsx(Ae,{children:"Create Brand"})}),e.jsxs("div",{className:"space-y-4 py-4 bg-white",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Brand Name"}),e.jsx(M,{placeholder:"Brand Name",value:T.name,onChange:x=>q({...T,name:x.target.value,slug:x.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Slug"}),e.jsx(M,{placeholder:"brand-slug",value:T.slug,onChange:x=>q({...T,slug:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Logo"}),e.jsx(M,{type:"file",onChange:x=>x.target.files&&q({...T,image:x.target.files[0]})})]})]}),e.jsxs(Fe,{children:[e.jsx(V,{variant:"outline",onClick:()=>H(!1),disabled:u,children:"Cancel"}),e.jsxs(V,{onClick:re,disabled:u,children:[u&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})})]})};export{Da as default};
