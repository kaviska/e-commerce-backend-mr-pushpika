import{r as i,f as j,t as d,j as e,H as W}from"./app-CgcuHfcV.js";import{S as X,C as M}from"./SellerLayout-BQ6E32iX.js";import{B as N}from"./button-Cohb5s7o.js";import{I as o,L as r}from"./label-PlmXA06j.js";import{B as O}from"./badge-CILsyK6g.js";import{D as Y,a as Z,b as ee,c as ae,e as te,d as se}from"./dialog-BdEab6bY.js";import{T as ie}from"./textarea-MncRj-27.js";import{S as A,a as P,b as B,c as U,d as x,C as le}from"./select-BxtlDTKh.js";import{D as re,a as ne,b as de,c as q}from"./dropdown-menu-DrqAv69t.js";import{a as oe,I as ce,C as me}from"./SellerSidebar-DiSXodgc.js";import{S as xe}from"./search-CoFUMz3D.js";import{L as w}from"./loader-circle-gW5wr0i7.js";import{c as $}from"./createLucideIcon-L111TtY5.js";import{E as he}from"./ellipsis-vertical-bVP5VnVk.js";import{P as pe}from"./pencil-Ctx-ePyM.js";import{T as fe}from"./trash-2-DLQfhOHB.js";import"./index-khSbgmmG.js";import"./index-xVpn745B.js";import"./index-CJQ1CjOf.js";import"./index-Dlg8Dh6T.js";import"./index-DbJ4XrGX.js";import"./tslib.es6-BKH_Rm7U.js";import"./index-G6RhP6wp.js";import"./index-Dm-BJdsp.js";import"./index-BAfHTWwu.js";import"./index-CiKEIPUA.js";import"./auth-OXswbwCF.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ge=$("Link",ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],Ne=$("Megaphone",je),Je=()=>{const[S,z]=i.useState([]),[H,C]=i.useState(!0),[R,h]=i.useState(!1),[c,D]=i.useState(!1),[k,F]=i.useState({}),[I,b]=i.useState(null),[_,L]=i.useState(null),[f,V]=i.useState(!1),[u,E]=i.useState(null),[y,T]=i.useState(!1),[t,l]=i.useState({title:"",description:"",link:"",section:"new_arrival_banner",button_text:"",additional_field_1:"",additional_field_2:"",additional_field_3:"",additional_field_4:"",status:"active",start_date:"",end_date:""});i.useEffect(()=>{v()},[]);const v=async()=>{try{C(!0);const a=await j.get("/api/notices",{params:{all:!0,status:"all"}});a.data.status==="success"&&z(a.data.data)}catch(a){console.error("Failed to fetch notices",a),d.error("Failed to load notifications")}finally{C(!1)}},G=a=>{if(a.target.files&&a.target.files[0]){const s=a.target.files[0];L(s),b(URL.createObjectURL(s))}},J=async a=>{var p,n;if(a.preventDefault(),!_&&!c){d.error("Please upload an image");return}T(!0);const s=new FormData;s.append("title",t.title),s.append("description",t.description),s.append("link",t.link),s.append("section",t.section),t.button_text&&s.append("button_text",t.button_text),t.additional_field_1&&s.append("additional_field_1",t.additional_field_1),t.additional_field_2&&s.append("additional_field_2",t.additional_field_2),t.additional_field_3&&s.append("additional_field_3",t.additional_field_3),t.additional_field_4&&s.append("additional_field_4",t.additional_field_4),s.append("status",t.status),s.append("start_date",t.start_date),s.append("end_date",t.end_date),_&&s.append("image",_);try{let m;c&&k.id?(s.append("id",k.id.toString()),m=await j.post("/api/notices/update",s,{headers:{"Content-Type":"multipart/form-data"}})):m=await j.post("/api/notices",s,{headers:{"Content-Type":"multipart/form-data"}}),m.data.status==="success"?(d.success(c?"Notification updated successfully":"Notification created successfully"),h(!1),g(),v()):d.error(m.data.message||"Operation failed")}catch(m){console.error("Submit error:",m),d.error(((n=(p=m.response)==null?void 0:p.data)==null?void 0:n.message)||"Something went wrong")}finally{T(!1)}},K=async a=>{var s,p;if(confirm("Are you sure you want to delete this notification? This action cannot be undone.")){E(a);try{const n=await j.delete("/api/notices",{data:{id:a}});n.data.status==="success"?(d.success("Notification deleted successfully"),v()):d.error(n.data.message||"Failed to delete notification")}catch(n){console.error("Delete error",n),d.error(((p=(s=n.response)==null?void 0:s.data)==null?void 0:p.message)||"Failed to delete notification")}finally{E(null)}}},Q=a=>{D(!0),F(a),l({title:a.title,description:a.description,link:a.link,section:a.section,button_text:a.button_text||"",additional_field_1:a.additional_field_1||"",additional_field_2:a.additional_field_2||"",additional_field_3:a.additional_field_3||"",additional_field_4:a.additional_field_4||"",status:a.status,start_date:a.start_date.split(" ")[0],end_date:a.end_date.split(" ")[0]}),b("/"+a.image),h(!0)},g=()=>{D(!1),F({}),l({title:"",description:"",link:"",section:"new_arrival_banner",button_text:"",additional_field_1:"",additional_field_2:"",additional_field_3:"",additional_field_4:"",status:"active",start_date:"",end_date:""}),b(null),L(null)};return e.jsxs(X,{children:[e.jsx(W,{title:"Notifications | Seller Center"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your promotional banners and notices"})]}),e.jsxs(N,{onClick:()=>{g(),h(!0)},className:"bg-green-600 text-white hover:bg-green-700",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Create Notification"]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(o,{placeholder:"Search notifications...",className:"pl-9 bg-white"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Details"}),e.jsx("th",{className:"px-6 py-3",children:"Section"}),e.jsx("th",{className:"px-6 py-3",children:"Duration"}),e.jsx("th",{className:"px-6 py-3",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:H?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:[e.jsx(w,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading notifications..."]})}):S.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(Ne,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No notifications found"}),e.jsx("p",{children:"Create your first notification or banner to engage customers."})]})}):S.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 flex-shrink-0 bg-gray-100 rounded-md overflow-hidden border border-gray-200",children:e.jsx("img",{src:"/"+a.image,alt:a.title,className:"h-full w-full object-cover",onError:s=>{s.target.src="https://via.placeholder.com/64?text=No+Img"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:a.title}),e.jsx("div",{className:"text-gray-500 text-xs truncate max-w-xs",children:a.description}),a.link&&e.jsxs("div",{className:"flex items-center text-xs text-blue-600 mt-1",children:[e.jsx(ge,{className:"w-3 h-3 mr-1"}),a.link]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(O,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:a.section.replace(/_/g," ")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(M,{className:"w-3 h-3 mr-1 text-gray-400"}),new Date(a.start_date).toLocaleDateString()]}),e.jsx("span",{className:"text-gray-400 pl-4",children:"to"}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(M,{className:"w-3 h-3 mr-1 text-gray-400"}),new Date(a.end_date).toLocaleDateString()]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(O,{className:a.status==="active"?"bg-green-100 text-green-700 hover:bg-green-200 border-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-200",children:a.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(re,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500",disabled:u===a.id,children:u===a.id?e.jsx(w,{className:"h-4 w-4 animate-spin"}):e.jsx(he,{className:"h-4 w-4"})})}),e.jsxs(de,{align:"end",children:[e.jsxs(q,{onClick:()=>Q(a),disabled:u!==null,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsxs(q,{className:"text-red-600",onClick:()=>K(a.id),disabled:u!==null,children:[e.jsx(fe,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})})]},a.id))})]})})]})]}),e.jsx(Y,{open:R,onOpenChange:a=>{h(a),a||g()},children:e.jsxs(Z,{className:"max-w-4xl bg-white",children:[e.jsxs(ee,{children:[e.jsx(ae,{className:"text-xl font-bold",children:c?"Edit Notification":"Create Notification"}),e.jsx(te,{children:c?"Update the notification details below.":"Enter the details for your notification banner."})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto py-4",children:e.jsx("form",{id:"notice-form",onSubmit:J,className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"image",className:"text-base font-medium flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-gray-600"}),"Banner Image ",!c&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[I&&e.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsx(o,{id:"image",type:"file",accept:"image/*",onChange:G,className:"cursor-pointer file:cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 h-auto py-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Recommended size: 1920x600px. Max file size: 2MB"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsxs(r,{htmlFor:"title",className:"text-base font-medium",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"title",required:!0,value:t.title,onChange:a=>l({...t,title:a.target.value}),placeholder:"e.g., Summer Sale - Up to 50% Off",className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsxs(r,{htmlFor:"description",className:"text-base font-medium",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ie,{id:"description",required:!0,value:t.description,onChange:a=>l({...t,description:a.target.value}),placeholder:"Enter a detailed description for this notification...",className:"h-24 bg-white resize-none"})]}),e.jsxs("div",{className:"space-y-2 col-span-2 md:col-span-1",children:[e.jsx(r,{htmlFor:"link",className:"text-base font-medium",children:"Link URL"}),e.jsx(o,{id:"link",value:t.link,onChange:a=>l({...t,link:a.target.value}),placeholder:"https://...",className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2 col-span-2 md:col-span-1",children:[e.jsx(r,{htmlFor:"button_text",className:"text-base font-medium",children:"Button Text"}),e.jsx(o,{id:"button_text",value:t.button_text,onChange:a=>l({...t,button_text:a.target.value}),placeholder:"e.g. Shop Now",className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsxs(r,{htmlFor:"section",className:"text-base font-medium",children:["Placement Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:t.section,onValueChange:a=>l({...t,section:a}),children:[e.jsx(P,{className:"bg-white",children:e.jsx(B,{placeholder:"Select section"})}),e.jsxs(U,{className:"bg-white",children:[e.jsx(x,{value:"new_arrival_banner",children:"New Arrival Banner"}),e.jsx(x,{value:"home_slider",children:"Home Page Slider"}),e.jsx(x,{value:"offer_section",children:"Offer Section"}),e.jsx(x,{value:"shop_offer",children:"Shop Offer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"start_date",className:"text-base font-medium",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"start_date",type:"date",required:!0,value:t.start_date,onChange:a=>l({...t,start_date:a.target.value}),className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"end_date",className:"text-base font-medium",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"end_date",type:"date",required:!0,value:t.end_date,onChange:a=>l({...t,end_date:a.target.value}),className:"bg-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{className:"text-base font-medium",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:t.status,onValueChange:a=>l({...t,status:a}),children:[e.jsx(P,{className:"bg-white",children:e.jsx(B,{})}),e.jsxs(U,{className:"bg-white",children:[e.jsx(x,{value:"active",children:"Active"}),e.jsx(x,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("button",{type:"button",className:"text-sm text-green-600 font-medium hover:text-green-700 flex items-center gap-1 transition-colors",onClick:()=>V(!f),children:[f?"Hide Advanced Fields":"Show Advanced Fields",f?e.jsx(le,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"})]}),f&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[[1,2,3,4].map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:`additional_field_${a}`,className:"text-xs text-gray-600",children:["Additional Field ",a]}),e.jsx(o,{id:`additional_field_${a}`,value:t[`additional_field_${a}`],onChange:s=>l({...t,[`additional_field_${a}`]:s.target.value}),placeholder:`Value ${a}`,className:"bg-white"})]},a)),e.jsx("div",{className:"col-span-2 text-xs text-gray-500",children:"* These fields are used for specific component logic and custom data."})]})]})]})})}),e.jsxs(se,{children:[e.jsx(N,{variant:"outline",onClick:()=>{h(!1),g()},type:"button",disabled:y,children:"Cancel"}),e.jsxs(N,{form:"notice-form",type:"submit",disabled:y,className:"bg-green-600 text-white hover:bg-green-700",children:[y?e.jsx(w,{className:"w-4 h-4 animate-spin mr-2"}):null,c?"Update Notification":"Create Notification"]})]})]})})]})};export{Je as default};
