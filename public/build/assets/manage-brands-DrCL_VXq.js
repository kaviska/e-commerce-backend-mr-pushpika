import{r as t,e as p,t as r,j as e,L as U}from"./app-CfNo4LyL.js";import{S as k}from"./SellerLayout-BKQ2vRRh.js";import{B as u}from"./button-DYS6W9m3.js";import{I as D,L as O}from"./label-DA-TjnO8.js";import{D as A,a as P,b as Q,c as q,e as z,d as H}from"./dialog-BX1goVUx.js";import{D as R,a as V,b as G,c as S}from"./dropdown-menu-T0cWpx2O.js";import{S as J}from"./search-BBDX3mxB.js";import{L as g}from"./loader-circle-CZePyrvB.js";import{T as K}from"./SellerSidebar-Cto75vpQ.js";import{E as W}from"./ellipsis-vertical-BsfGofvx.js";import{P as X}from"./pencil-SwrZqg9E.js";import{T as Y}from"./trash-2-Z6fLCdYn.js";import"./createLucideIcon-ha3u4Tcd.js";import"./index-CRPvz72I.js";import"./index-Do2vMDzp.js";import"./index-COVW5kEW.js";import"./tslib.es6-BUas5LQb.js";import"./index-Cl-KLhKS.js";import"./index-ljWjQthQ.js";import"./auth-BpSFxXD-.js";const je=()=>{const[B,C]=t.useState([]),[E,j]=t.useState(!0),[o,L]=t.useState(""),[F,d]=t.useState(!1),[f,y]=t.useState(null),[i,b]=t.useState(null),[c,N]=t.useState(!1),[m,x]=t.useState({name:""});t.useEffect(()=>{h()},[]);const h=async()=>{try{j(!0);const s=await p.get("/api/brands");s.data.status==="success"&&C(s.data.data)}catch(s){console.error("Failed to fetch brands",s),r.error("Failed to load brands")}finally{j(!1)}},T=s=>{y(s),x({name:s.name}),d(!0)},I=async s=>{var n,l;if(s.preventDefault(),!!f){N(!0);try{const a=await p.put("/api/brands",{id:f.id.toString(),name:m.name});a.data.status==="success"?(r.success("Brand updated successfully"),d(!1),h(),w()):r.error(a.data.message||"Failed to update brand")}catch(a){console.error("Update error:",a),r.error(((l=(n=a.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to update brand")}finally{N(!1)}}},M=async s=>{var n,l;if(confirm("Are you sure you want to delete this brand? This action cannot be undone.")){b(s);try{const a=await p.delete("/api/brands",{data:{id:s.toString()}});a.data.status==="success"?(r.success("Brand deleted successfully"),h()):r.error(a.data.message||"Failed to delete brand")}catch(a){console.error("Delete error:",a),r.error(((l=(n=a.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to delete brand")}finally{b(null)}}},w=()=>{y(null),x({name:""})},v=B.filter(s=>s.name.toLowerCase().includes(o.toLowerCase()));return e.jsxs(k,{children:[e.jsx(U,{title:"Manage Brands | Seller Center"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Brands"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Edit or delete your brands"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(D,{placeholder:"Search brands...",className:"pl-9 bg-white",value:o,onChange:s=>L(s.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"ID"}),e.jsx("th",{className:"px-6 py-3",children:"Brand Name"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:E?e.jsx("tr",{children:e.jsxs("td",{colSpan:3,className:"px-6 py-8 text-center text-gray-500",children:[e.jsx(g,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading brands..."]})}):v.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(K,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No brands found"}),e.jsx("p",{children:o?"Try a different search term":"Create your first brand to get started"})]})}):v.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["#",s.id]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:s.name})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(R,{children:[e.jsx(V,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500",disabled:i===s.id,children:i===s.id?e.jsx(g,{className:"h-4 w-4 animate-spin"}):e.jsx(W,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",className:"bg-white",children:[e.jsxs(S,{onClick:()=>T(s),disabled:i!==null,children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsxs(S,{className:"text-red-600",onClick:()=>M(s.id),disabled:i!==null,children:[e.jsx(Y,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})})]},s.id))})]})})]})]}),e.jsx(A,{open:F,onOpenChange:d,children:e.jsxs(P,{className:"max-w-md bg-white",children:[e.jsxs(Q,{children:[e.jsx(q,{children:"Edit Brand"}),e.jsx(z,{children:"Update the brand name below."})]}),e.jsx("form",{id:"edit-brand-form",onSubmit:I,className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"name",children:"Brand Name"}),e.jsx(D,{id:"name",required:!0,value:m.name,onChange:s=>x({...m,name:s.target.value}),placeholder:"Brand Name",className:"bg-white"})]})}),e.jsxs(H,{children:[e.jsx(u,{variant:"outline",onClick:()=>{d(!1),w()},disabled:c,children:"Cancel"}),e.jsxs(u,{form:"edit-brand-form",type:"submit",disabled:c,className:"bg-green-600 text-white hover:bg-green-700",children:[c?e.jsx(g,{className:"w-4 h-4 animate-spin mr-2"}):null,"Update Brand"]})]})]})})]})};export{je as default};
