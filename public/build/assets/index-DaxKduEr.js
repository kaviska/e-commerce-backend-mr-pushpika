import{r as s,h as P}from"./app-B1e7NyTU.js";import{u as R}from"./button-DsMbreBE.js";function C(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}var A=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{},S=P[" useInsertionEffect ".trim().toString()]||A;function L({prop:n,defaultProp:e,onChange:t=()=>{},caller:o}){const[r,c,l]=T({defaultProp:e,onChange:t}),a=n!==void 0,m=a?n:r;{const u=s.useRef(n!==void 0);s.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${o} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,o])}const i=s.useCallback(u=>{var f;if(a){const d=g(u)?u(n):u;d!==n&&((f=l.current)==null||f.call(l,d))}else c(u)},[a,n,c,l]);return[m,i]}function T({defaultProp:n,onChange:e}){const[t,o]=s.useState(n),r=s.useRef(t),c=s.useRef(e);return S(()=>{c.current=e},[e]),s.useEffect(()=>{var l;r.current!==t&&((l=c.current)==null||l.call(c,t),r.current=t)},[t,r]),[t,o,c]}function g(n){return typeof n=="function"}function w(n,e){return s.useReducer((t,o)=>e[t][o]??t,n)}var h=n=>{const{present:e,children:t}=n,o=E(e),r=typeof t=="function"?t({present:o.isPresent}):s.Children.only(t),c=R(o.ref,I(r));return typeof t=="function"||o.isPresent?s.cloneElement(r,{ref:c}):null};h.displayName="Presence";function E(n){const[e,t]=s.useState(),o=s.useRef(null),r=s.useRef(n),c=s.useRef("none"),l=n?"mounted":"unmounted",[a,m]=w(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const i=p(o.current);c.current=a==="mounted"?i:"none"},[a]),A(()=>{const i=o.current,u=r.current;if(u!==n){const d=c.current,N=p(i);n?m("MOUNT"):N==="none"||(i==null?void 0:i.display)==="none"?m("UNMOUNT"):m(u&&d!==N?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,m]),A(()=>{if(e){let i;const u=e.ownerDocument.defaultView??window,f=N=>{const O=p(o.current).includes(CSS.escape(N.animationName));if(N.target===e&&O&&(m("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",i=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},d=N=>{N.target===e&&(c.current=p(o.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(i),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:s.useCallback(i=>{o.current=i?getComputedStyle(i):null,t(i)},[])}}function p(n){return(n==null?void 0:n.animationName)||"none"}function I(n){var o,r;let e=(o=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{h as P,A as a,C as c,L as u};
